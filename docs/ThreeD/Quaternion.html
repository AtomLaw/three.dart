        <!DOCTYPE html>
        <html>
        <head>
                <meta charset="utf-8">
        <title>Quaternion Class / ThreeD Library / Dart Documentation</title>
        <link rel="stylesheet" type="text/css"
            href="../styles.css">
        <link href="http://fonts.googleapis.com/css?family=Open+Sans:400,600,700,800" rel="stylesheet" type="text/css">
        <link rel="shortcut icon" href="../favicon.ico">
        
        </head>
        <body data-library="ThreeD" data-type="Quaternion">
        <div class="page">
        <div class="header">
          <a href="../index.html"><div class="logo"></div></a>
          <a href="../index.html">Dart Documentation</a>
         &rsaquo; <a href="../ThreeD.html">ThreeD</a> &rsaquo; <a href="../ThreeD/Quaternion.html">Quaternion</a>        <div id="search-box">
          <input type="search" name="q" id="q" autocomplete="off"
              class="search-input" placeholder="Search API">
        </div>
        
      </div>
      <div class="drop-down" id="drop-down"></div>
      
        <div class="nav">
        
<h2><div class="icon-library"></div><a href="../CurveUtils.html">CurveUtils</a></h2><h2><div class="icon-library"></div><a href="../FontUtils.html">FontUtils</a></h2><h2><div class="icon-library"></div><a href="../GeometryUtils.html">GeometryUtils</a></h2><h2><div class="icon-library"></div><a href="../ImageUtils.html">ImageUtils</a></h2><h2><div class="icon-library"></div><a href="../SceneUtils.html">SceneUtils</a></h2><h2><div class="icon-library"></div><a href="../ShapeUtils.html">ShapeUtils</a></h2><h2><div class="icon-library"></div><a href="../ThreeD.html">ThreeD</a></h2><ul class="icon">
<li><a href="../ThreeD/AmbientLight.html"><div class="icon-class"></div>AmbientLight</a></li>
<li><a href="../ThreeD/ArcCurve.html"><div class="icon-class"></div>ArcCurve</a></li>
<li><a href="../ThreeD/ArrowHelper.html"><div class="icon-class"></div>ArrowHelper</a></li>
<li><a href="../ThreeD/AxisHelper.html"><div class="icon-class"></div>AxisHelper</a></li>
<li><a href="../ThreeD/Bone.html"><div class="icon-class"></div>Bone</a></li>
<li><a href="../ThreeD/BoundingBox.html"><div class="icon-class"></div>BoundingBox</a></li>
<li><a href="../ThreeD/BoundingSphere.html"><div class="icon-class"></div>BoundingSphere</a></li>
<li><a href="../ThreeD/Buffer.html"><div class="icon-class"></div>Buffer</a></li>
<li><a href="../ThreeD/BufferGeometry.html"><div class="icon-class"></div>BufferGeometry</a></li>
<li><a href="../ThreeD/Camera.html"><div class="icon-class"></div>Camera</a></li>
<li><a href="../ThreeD/CanvasRenderData.html"><div class="icon-class"></div>CanvasRenderData</a></li>
<li><a href="../ThreeD/CanvasRenderer.html"><div class="icon-class"></div>CanvasRenderer</a></li>
<li><a href="../ThreeD/CircleGeometry.html"><div class="icon-class"></div>CircleGeometry</a></li>
<li><a href="../ThreeD/ClosedSplineCurve3.html"><div class="icon-class"></div>ClosedSplineCurve3</a></li>
<li><a href="../ThreeD/Color.html"><div class="icon-class"></div>Color</a></li>
<li><a href="../ThreeD/ConvexGeometry.html"><div class="icon-class"></div>ConvexGeometry</a></li>
<li><a href="../ThreeD/CubeGeomSides.html"><div class="icon-class"></div>CubeGeomSides</a></li>
<li><a href="../ThreeD/CubeGeometry.html"><div class="icon-class"></div>CubeGeometry</a></li>
<li><a href="../ThreeD/CubeReflectionMapping.html"><div class="icon-class"></div>CubeReflectionMapping</a></li>
<li><a href="../ThreeD/CubeRefractionMapping.html"><div class="icon-class"></div>CubeRefractionMapping</a></li>
<li><a href="../ThreeD/CubicBezierCurve.html"><div class="icon-class"></div>CubicBezierCurve</a></li>
<li><a href="../ThreeD/CubicBezierCurve3.html"><div class="icon-class"></div>CubicBezierCurve3</a></li>
<li><a href="../ThreeD/Curve.html"><div class="icon-class"></div>Curve&lt;V&gt;</a></li>
<li><a href="../ThreeD/Curve2D.html"><div class="icon-class"></div>Curve2D</a></li>
<li><a href="../ThreeD/Curve3D.html"><div class="icon-class"></div>Curve3D</a></li>
<li><a href="../ThreeD/CurvePath.html"><div class="icon-class"></div>CurvePath</a></li>
<li><a href="../ThreeD/CylinderGeometry.html"><div class="icon-class"></div>CylinderGeometry</a></li>
<li><a href="../ThreeD/DataTexture.html"><div class="icon-class"></div>DataTexture</a></li>
<li><a href="../ThreeD/DirectionalLight.html"><div class="icon-class"></div>DirectionalLight</a></li>
<li><a href="../ThreeD/EllipseCurve.html"><div class="icon-class"></div>EllipseCurve</a></li>
<li><a href="../ThreeD/EventEmitter.html"><div class="icon-class"></div>EventEmitter</a></li>
<li><a href="../ThreeD/EventEmitterEvent.html"><div class="icon-class"></div>EventEmitterEvent</a></li>
<li><a href="../ThreeD/ExtrudeGeometry.html"><div class="icon-class"></div>ExtrudeGeometry</a></li>
<li><a href="../ThreeD/ExtrudeGeometryWorldUVGenerator.html"><div class="icon-class"></div>ExtrudeGeometryWorldUVGenerator</a></li>
<li><a href="../ThreeD/Face3.html"><div class="icon-class"></div>Face3</a></li>
<li><a href="../ThreeD/Face4.html"><div class="icon-class"></div>Face4</a></li>
<li><a href="../ThreeD/Fog.html"><div class="icon-class"></div>Fog</a></li>
<li><a href="../ThreeD/FogExp2.html"><div class="icon-class"></div>FogExp2</a></li>
<li><a href="../ThreeD/FogLinear.html"><div class="icon-class"></div>FogLinear</a></li>
<li><a href="../ThreeD/Frustum.html"><div class="icon-class"></div>Frustum</a></li>
<li><a href="../ThreeD/Geometry.html"><div class="icon-class"></div>Geometry</a></li>
<li><a href="../ThreeD/IFace3.html"><div class="icon-interface"></div>IFace3</a></li>
<li><a href="../ThreeD/IFace4.html"><div class="icon-interface"></div>IFace4</a></li>
<li><a href="../ThreeD/IMaterial.html"><div class="icon-interface"></div>IMaterial</a></li>
<li><a href="../ThreeD/IParticleMaterial.html"><div class="icon-interface"></div>IParticleMaterial</a></li>
<li><a href="../ThreeD/IRenderableFace3.html"><div class="icon-interface"></div>IRenderableFace3</a></li>
<li><a href="../ThreeD/IRenderableFace4.html"><div class="icon-interface"></div>IRenderableFace4</a></li>
<li><a href="../ThreeD/IRenderableObj.html"><div class="icon-interface"></div>IRenderableObj</a></li>
<li><a href="../ThreeD/ITextureMapMaterial.html"><div class="icon-interface"></div>ITextureMapMaterial</a></li>
<li><a href="../ThreeD/IVector2.html"><div class="icon-interface"></div>IVector2</a></li>
<li><a href="../ThreeD/IVector3.html"><div class="icon-interface"></div>IVector3</a></li>
<li><a href="../ThreeD/IVector4.html"><div class="icon-interface"></div>IVector4</a></li>
<li><a href="../ThreeD/IcosahedronGeometry.html"><div class="icon-class"></div>IcosahedronGeometry</a></li>
<li><a href="../ThreeD/ImageLoader.html"><div class="icon-class"></div>ImageLoader</a></li>
<li><a href="../ThreeD/ImmediateRenderObject.html"><div class="icon-class"></div>ImmediateRenderObject</a></li>
<li><a href="../ThreeD/Intersect.html"><div class="icon-class"></div>Intersect</a></li>
<li><a href="../ThreeD/JSONLoader.html"><div class="icon-class"></div>JSONLoader</a></li>
<li><a href="../ThreeD/LOD.html"><div class="icon-class"></div>LOD</a></li>
<li><a href="../ThreeD/LatheGeometry.html"><div class="icon-class"></div>LatheGeometry</a></li>
<li><a href="../ThreeD/LensFlare.html"><div class="icon-class"></div>LensFlare</a></li>
<li><a href="../ThreeD/Light.html"><div class="icon-class"></div>Light</a></li>
<li><a href="../ThreeD/Line.html"><div class="icon-class"></div>Line</a></li>
<li><a href="../ThreeD/LineBasicMaterial.html"><div class="icon-class"></div>LineBasicMaterial</a></li>
<li><a href="../ThreeD/LineCurve.html"><div class="icon-class"></div>LineCurve</a></li>
<li><a href="../ThreeD/LineCurve3.html"><div class="icon-class"></div>LineCurve3</a></li>
<li><a href="../ThreeD/LoadCompleteCallback.html"><div class="icon-interface"></div>LoadCompleteCallback</a></li>
<li><a href="../ThreeD/LoadProgressCallback.html"><div class="icon-interface"></div>LoadProgressCallback</a></li>
<li><a href="../ThreeD/LoadStartCallback.html"><div class="icon-interface"></div>LoadStartCallback</a></li>
<li><a href="../ThreeD/LoadedCallback.html"><div class="icon-interface"></div>LoadedCallback</a></li>
<li><a href="../ThreeD/Loader.html"><div class="icon-class"></div>Loader</a></li>
<li><a href="../ThreeD/Material.html"><div class="icon-class"></div>Material</a></li>
<li><a href="../ThreeD/Matrix3.html"><div class="icon-class"></div>Matrix3</a></li>
<li><a href="../ThreeD/Matrix4.html"><div class="icon-class"></div>Matrix4</a></li>
<li><a href="../ThreeD/Mesh.html"><div class="icon-class"></div>Mesh</a></li>
<li><a href="../ThreeD/MeshBasicMaterial.html"><div class="icon-class"></div>MeshBasicMaterial</a></li>
<li><a href="../ThreeD/MeshDepthMaterial.html"><div class="icon-class"></div>MeshDepthMaterial</a></li>
<li><a href="../ThreeD/MeshFaceMaterial.html"><div class="icon-class"></div>MeshFaceMaterial</a></li>
<li><a href="../ThreeD/MeshLambertMaterial.html"><div class="icon-class"></div>MeshLambertMaterial</a></li>
<li><a href="../ThreeD/MeshNormalMaterial.html"><div class="icon-class"></div>MeshNormalMaterial</a></li>
<li><a href="../ThreeD/MeshPhongMaterial.html"><div class="icon-class"></div>MeshPhongMaterial</a></li>
<li><a href="../ThreeD/MorphAnimMesh.html"><div class="icon-class"></div>MorphAnimMesh</a></li>
<li><a href="../ThreeD/Object3D.html"><div class="icon-class"></div>Object3D</a></li>
<li><a href="../ThreeD/OctahedronGeometry.html"><div class="icon-class"></div>OctahedronGeometry</a></li>
<li><a href="../ThreeD/OrthographicCamera.html"><div class="icon-class"></div>OrthographicCamera</a></li>
<li><a href="../ThreeD/ParametricGeometry.html"><div class="icon-class"></div>ParametricGeometry</a></li>
<li><a href="../ThreeD/Particle.html"><div class="icon-class"></div>Particle</a></li>
<li><a href="../ThreeD/ParticleBasicMaterial.html"><div class="icon-class"></div>ParticleBasicMaterial</a></li>
<li><a href="../ThreeD/ParticleCanvasMaterial.html"><div class="icon-class"></div>ParticleCanvasMaterial</a></li>
<li><a href="../ThreeD/ParticleCanvasMaterialProgram.html"><div class="icon-interface"></div>ParticleCanvasMaterialProgram</a></li>
<li><a href="../ThreeD/ParticleSystem.html"><div class="icon-class"></div>ParticleSystem</a></li>
<li><a href="../ThreeD/Path.html"><div class="icon-class"></div>Path</a></li>
<li><a href="../ThreeD/PathAction.html"><div class="icon-class"></div>PathAction</a></li>
<li><a href="../ThreeD/PerspectiveCamera.html"><div class="icon-class"></div>PerspectiveCamera</a></li>
<li><a href="../ThreeD/PlaneGeometry.html"><div class="icon-class"></div>PlaneGeometry</a></li>
<li><a href="../ThreeD/PointLight.html"><div class="icon-class"></div>PointLight</a></li>
<li><a href="../ThreeD/PolyhedronGeometry.html"><div class="icon-class"></div>PolyhedronGeometry</a></li>
<li><a href="../ThreeD/PolyhedronGeometryVertex.html"><div class="icon-class"></div>PolyhedronGeometryVertex</a></li>
<li><a href="../ThreeD/Program.html"><div class="icon-class"></div>Program</a></li>
<li><a href="../ThreeD/Projector.html"><div class="icon-class"></div>Projector</a></li>
<li><a href="../ThreeD/ProjectorRenderData.html"><div class="icon-class"></div>ProjectorRenderData</a></li>
<li><a href="../ThreeD/QuadraticBezierCurve.html"><div class="icon-class"></div>QuadraticBezierCurve</a></li>
<li><a href="../ThreeD/QuadraticBezierCurve3.html"><div class="icon-class"></div>QuadraticBezierCurve3</a></li>
<li><div class="icon-class"></div><strong>Quaternion</strong></li>
<li><a href="../ThreeD/Ray.html"><div class="icon-class"></div>Ray</a></li>
<li><a href="../ThreeD/Rectangle.html"><div class="icon-class"></div>Rectangle</a></li>
<li><a href="../ThreeD/RenderInts.html"><div class="icon-class"></div>RenderInts</a></li>
<li><a href="../ThreeD/RenderableFace3.html"><div class="icon-class"></div>RenderableFace3</a></li>
<li><a href="../ThreeD/RenderableFace4.html"><div class="icon-class"></div>RenderableFace4</a></li>
<li><a href="../ThreeD/RenderableLine.html"><div class="icon-class"></div>RenderableLine</a></li>
<li><a href="../ThreeD/RenderableObject.html"><div class="icon-class"></div>RenderableObject</a></li>
<li><a href="../ThreeD/RenderableParticle.html"><div class="icon-class"></div>RenderableParticle</a></li>
<li><a href="../ThreeD/RenderableVertex.html"><div class="icon-class"></div>RenderableVertex</a></li>
<li><a href="../ThreeD/Renderer.html"><div class="icon-class"></div>Renderer</a></li>
<li><a href="../ThreeD/Ribbon.html"><div class="icon-class"></div>Ribbon</a></li>
<li><a href="../ThreeD/Scene.html"><div class="icon-class"></div>Scene</a></li>
<li><a href="../ThreeD/ShaderMaterial.html"><div class="icon-class"></div>ShaderMaterial</a></li>
<li><a href="../ThreeD/Shape.html"><div class="icon-class"></div>Shape</a></li>
<li><a href="../ThreeD/SkinnedMesh.html"><div class="icon-class"></div>SkinnedMesh</a></li>
<li><a href="../ThreeD/SphereGeometry.html"><div class="icon-class"></div>SphereGeometry</a></li>
<li><a href="../ThreeD/SphericalReflectionMapping.html"><div class="icon-class"></div>SphericalReflectionMapping</a></li>
<li><a href="../ThreeD/SphericalRefractionMapping.html"><div class="icon-class"></div>SphericalRefractionMapping</a></li>
<li><a href="../ThreeD/SplineCurve.html"><div class="icon-class"></div>SplineCurve</a></li>
<li><a href="../ThreeD/SplineCurve3.html"><div class="icon-class"></div>SplineCurve3</a></li>
<li><a href="../ThreeD/SpotLight.html"><div class="icon-class"></div>SpotLight</a></li>
<li><a href="../ThreeD/Sprite.html"><div class="icon-class"></div>Sprite</a></li>
<li><a href="../ThreeD/SpriteAlignment.html"><div class="icon-class"></div>SpriteAlignment</a></li>
<li><a href="../ThreeD/TetrahedronGeometry.html"><div class="icon-class"></div>TetrahedronGeometry</a></li>
<li><a href="../ThreeD/TextGeometry.html"><div class="icon-class"></div>TextGeometry</a></li>
<li><a href="../ThreeD/Texture.html"><div class="icon-class"></div>Texture</a></li>
<li><a href="../ThreeD/Three.html"><div class="icon-class"></div>Three</a></li>
<li><a href="../ThreeD/TorusGeometry.html"><div class="icon-class"></div>TorusGeometry</a></li>
<li><a href="../ThreeD/TorusKnotGeometry.html"><div class="icon-class"></div>TorusKnotGeometry</a></li>
<li><a href="../ThreeD/TubeGeometry.html"><div class="icon-class"></div>TubeGeometry</a></li>
<li><a href="../ThreeD/UV.html"><div class="icon-class"></div>UV</a></li>
<li><a href="../ThreeD/UVMapping.html"><div class="icon-class"></div>UVMapping</a></li>
<li><a href="../ThreeD/Uniform.html"><div class="icon-class"></div>Uniform</a></li>
<li><a href="../ThreeD/UniformsUtils.html"><div class="icon-class"></div>UniformsUtils</a></li>
<li><a href="../ThreeD/Vector2.html"><div class="icon-class"></div>Vector2</a></li>
<li><a href="../ThreeD/Vector3.html"><div class="icon-class"></div>Vector3</a></li>
<li><a href="../ThreeD/Vector4.html"><div class="icon-class"></div>Vector4</a></li>
<li><a href="../ThreeD/Vertex.html"><div class="icon-class"></div>Vertex</a></li>
<li><a href="../ThreeD/WebGLCamera.html"><div class="icon-class"></div>WebGLCamera</a></li>
<li><a href="../ThreeD/WebGLGeometry.html"><div class="icon-class"></div>WebGLGeometry</a></li>
<li><a href="../ThreeD/WebGLMaterial.html"><div class="icon-class"></div>WebGLMaterial</a></li>
<li><a href="../ThreeD/WebGLObject.html"><div class="icon-class"></div>WebGLObject</a></li>
<li><a href="../ThreeD/WebGLRenderTarget.html"><div class="icon-class"></div>WebGLRenderTarget</a></li>
<li><a href="../ThreeD/WebGLRenderTargetCube.html"><div class="icon-class"></div>WebGLRenderTargetCube</a></li>
<li><a href="../ThreeD/WebGLRenderer.html"><div class="icon-class"></div>WebGLRenderer</a></li>
<li><a href="../ThreeD/WebGLRendererInfo.html"><div class="icon-class"></div>WebGLRendererInfo</a></li>
<li><a href="../ThreeD/WebGLRendererMemoryInfo.html"><div class="icon-class"></div>WebGLRendererMemoryInfo</a></li>
<li><a href="../ThreeD/WebGLRendererRenderInfo.html"><div class="icon-class"></div>WebGLRendererRenderInfo</a></li>
</ul>
<h2><div class="icon-library"></div><a href="../ThreeMath.html">ThreeMath</a></h2></div>
<div class="content">
        <h2><strong>Quaternion</strong>
          Class
        </h2>
        
<div class="doc">
<p>@author mikael emtinger / http://gomo.se/
@author alteredq / http://alteredqualia.com/</p>
<p>Ported to Dart from JS by:
@author rob silverton / http://www.unwrong.com/</p>
</div>
<h3>Implements</h3>
<p>
<span class="type-box"><span class="icon-interface"></span><a href="../ThreeD/IVector4.html">IVector4</a></span></p>
<h3>Constructors</h3>
<div class="method"><h4 id="Quaternion">
<span class="show-code">Code</span>
new <strong>Quaternion</strong>([<a href="http://api.dartlang.org/dart_core/num.html">num</a> x = 0, <a href="http://api.dartlang.org/dart_core/num.html">num</a> y = 0, <a href="http://api.dartlang.org/dart_core/num.html">num</a> z = 0, <a href="http://api.dartlang.org/dart_core/num.html">num</a> w = 1]) <a class="anchor-link" href="#Quaternion"
              title="Permalink to Quaternion.Quaternion">#</a></h4>
<div class="doc">

<pre class="source">
Quaternion( [num this.x=0, num this.y=0, num this.z=0, num this.w=1] );
</pre>
</div>
</div>
<h3>Static Methods</h3>
<div class="method"><h4 id="slerp">
<span class="show-code">Code</span>
<a href="../ThreeD/Vector4.html">Vector4</a> <strong>slerp</strong>(<a href="../ThreeD/Vector4.html">Vector4</a> qa, <a href="../ThreeD/Vector4.html">Vector4</a> qb, <a href="../ThreeD/Vector4.html">Vector4</a> qm, <a href="http://api.dartlang.org/dart_core/num.html">num</a> t) <a class="anchor-link" href="#slerp"
              title="Permalink to Quaternion.slerp">#</a></h4>
<div class="doc">

<pre class="source">
static Vector4 slerp( Vector4 qa, Vector4 qb, Vector4 qm, num t ) {
  // http://www.euclideanspace.com/maths/algebra/realNormedAlgebra/quaternions/slerp/

  num cosHalfTheta = qa.w * qb.w + qa.x * qb.x + qa.y * qb.y + qa.z * qb.z;

  if (cosHalfTheta &lt; 0) {
    qm.w = -qb.w; qm.x = -qb.x; qm.y = -qb.y; qm.z = -qb.z;
    cosHalfTheta = -cosHalfTheta;
  } else {
    qm.copy(qb);
  }
  
  if ( cosHalfTheta.abs() &gt;= 1.0 ) 
  {
    qm.w = qa.w; qm.x = qa.x; qm.y = qa.y; qm.z = qa.z;
    return qm;
  }

  num halfTheta = Math.acos( cosHalfTheta ),
  sinHalfTheta = Math.sqrt( 1.0 - cosHalfTheta * cosHalfTheta );

  if ( sinHalfTheta.abs() &lt; 0.001 ) 
  {
    qm.w = 0.5 * ( qa.w + qb.w );
    qm.x = 0.5 * ( qa.x + qb.x );
    qm.y = 0.5 * ( qa.y + qb.y );
    qm.z = 0.5 * ( qa.z + qb.z );

    return qm;
  }

  num ratioA = Math.sin( ( 1 - t ) * halfTheta ) / sinHalfTheta,
  ratioB = Math.sin( t * halfTheta ) / sinHalfTheta;

  qm.w = ( qa.w * ratioA + qm.w * ratioB );
  qm.x = ( qa.x * ratioA + qm.x * ratioB );
  qm.y = ( qa.y * ratioA + qm.y * ratioB );
  qm.z = ( qa.z * ratioA + qm.z * ratioB );

  return qm;
}
</pre>
</div>
</div>
<h3>Methods</h3>
<div class="method"><h4 id="calculateW">
<span class="show-code">Code</span>
<a href="../ThreeD/Quaternion.html">Quaternion</a> <strong>calculateW</strong>() <a class="anchor-link" href="#calculateW"
              title="Permalink to Quaternion.calculateW">#</a></h4>
<div class="doc">

<pre class="source">
Quaternion calculateW() {
  this.w = - Math.sqrt( ( 1.0 - x * x - y * y - z * z ).abs() );
  return this;
}
</pre>
</div>
</div>
<div class="method"><h4 id="clone">
<span class="show-code">Code</span>
<strong>clone</strong>() <a class="anchor-link" href="#clone"
              title="Permalink to Quaternion.clone">#</a></h4>
<div class="doc">

<pre class="source">
clone() =&gt; new Quaternion( this.x, this.y, this.z, this.w );
</pre>
</div>
</div>
<div class="method"><h4 id="copy">
<span class="show-code">Code</span>
<a href="../ThreeD/Quaternion.html">Quaternion</a> <strong>copy</strong>(<a href="../ThreeD/IVector4.html">IVector4</a> q) <a class="anchor-link" href="#copy"
              title="Permalink to Quaternion.copy">#</a></h4>
<div class="doc">

<pre class="source">
Quaternion copy( IVector4 q ) {
  this.x = q.x;
  this.y = q.y;
  this.z = q.z;
  this.w = q.w;

  return this;
}
</pre>
</div>
</div>
<div class="method"><h4 id="inverse">
<span class="show-code">Code</span>
<a href="../ThreeD/Quaternion.html">Quaternion</a> <strong>inverse</strong>() <a class="anchor-link" href="#inverse"
              title="Permalink to Quaternion.inverse">#</a></h4>
<div class="doc">

<pre class="source">
Quaternion inverse() {
  this.x *= -1;
  this.y *= -1;
  this.z *= -1;

  return this;
}
</pre>
</div>
</div>
<div class="method"><h4 id="length">
<span class="show-code">Code</span>
<a href="http://api.dartlang.org/dart_core/double.html">double</a> <strong>length</strong>() <a class="anchor-link" href="#length"
              title="Permalink to Quaternion.length">#</a></h4>
<div class="doc">

<pre class="source">
double length() =&gt; Math.sqrt( x * x + y * y + z * z + w * w );
</pre>
</div>
</div>
<div class="method"><h4 id="multiply">
<span class="show-code">Code</span>
<a href="../ThreeD/Quaternion.html">Quaternion</a> <strong>multiply</strong>(<a href="../ThreeD/Vector4.html">Vector4</a> q1, <a href="../ThreeD/Vector4.html">Vector4</a> q2) <a class="anchor-link" href="#multiply"
              title="Permalink to Quaternion.multiply">#</a></h4>
<div class="doc">

<pre class="source">
Quaternion multiply( Vector4 q1, Vector4 q2 ) {
  // from http://www.euclideanspace.com/maths/algebra/realNormedAlgebra/quaternions/code/index.htm

  this.x =  q1.x * q2.w + q1.y * q2.z - q1.z * q2.y + q1.w * q2.x;
  this.y = -q1.x * q2.z + q1.y * q2.w + q1.z * q2.x + q1.w * q2.y;
  this.z =  q1.x * q2.y - q1.y * q2.x + q1.z * q2.w + q1.w * q2.z;
  this.w = -q1.x * q2.x - q1.y * q2.y - q1.z * q2.z + q1.w * q2.w;

  return this;
}
</pre>
</div>
</div>
<div class="method"><h4 id="multiplySelf">
<span class="show-code">Code</span>
<a href="../ThreeD/Quaternion.html">Quaternion</a> <strong>multiplySelf</strong>(<a href="../ThreeD/Vector4.html">Vector4</a> quat2) <a class="anchor-link" href="#multiplySelf"
              title="Permalink to Quaternion.multiplySelf">#</a></h4>
<div class="doc">

<pre class="source">
Quaternion multiplySelf( Vector4 quat2 ) {
  num qax = x,  qay = y,  qaz = z,  qaw = w,
  qbx = quat2.x, qby = quat2.y, qbz = quat2.z, qbw = quat2.w;

  this.x = qax * qbw + qaw * qbx + qay * qbz - qaz * qby;
  this.y = qay * qbw + qaw * qby + qaz * qbx - qax * qbz;
  this.z = qaz * qbw + qaw * qbz + qax * qby - qay * qbx;
  this.w = qaw * qbw - qax * qbx - qay * qby - qaz * qbz;

  return this;
}
</pre>
</div>
</div>
<div class="method"><h4 id="multiplyVector3">
<span class="show-code">Code</span>
<a href="../ThreeD/Vector3.html">Vector3</a> <strong>multiplyVector3</strong>(<a href="../ThreeD/Vector3.html">Vector3</a> vec, [<a href="../ThreeD/Vector3.html">Vector3</a> dest = null]) <a class="anchor-link" href="#multiplyVector3"
              title="Permalink to Quaternion.multiplyVector3">#</a></h4>
<div class="doc">

<pre class="source">
Vector3 multiplyVector3( Vector3 vec, [Vector3 dest = null] ) {
  if( dest == null ) { dest = vec; }

  num _x    = vec.x,  _y  = vec.y,  _z  = vec.z,
    qx   = x, qy = y, qz = z, qw = w;

  // calculate quat * vec

  num ix =  qw * _x + qy * _z - qz * _y,
    iy =  qw * _y + qz * _x - qx * _z,
    iz =  qw * _z + qx * _y - qy * _x,
    iw = -qx * _x - qy * _y - qz * _z;

  // calculate result * inverse quat

  dest.x = ix * qw + iw * -qx + iy * -qz - iz * -qy;
  dest.y = iy * qw + iw * -qy + iz * -qx - ix * -qz;
  dest.z = iz * qw + iw * -qz + ix * -qy - iy * -qx;

  return dest;
}
</pre>
</div>
</div>
<div class="method"><h4 id="normalize">
<span class="show-code">Code</span>
<a href="../ThreeD/Quaternion.html">Quaternion</a> <strong>normalize</strong>() <a class="anchor-link" href="#normalize"
              title="Permalink to Quaternion.normalize">#</a></h4>
<div class="doc">

<pre class="source">
Quaternion normalize() {
  num l = Math.sqrt( x * x + y * y + z * z + w * w );

  if ( l === 0 ) {
    this.x = 0;
    this.y = 0;
    this.z = 0;
    this.w = 0;
  } else {
    l = 1 / l;

    this.x = x * l;
    this.y = y * l;
    this.z = z * l;
    this.w = w * l;
  }

  return this;
}
</pre>
</div>
</div>
<div class="method"><h4 id="setFromAxisAngle">
<span class="show-code">Code</span>
<a href="../ThreeD/Quaternion.html">Quaternion</a> <strong>setFromAxisAngle</strong>(<a href="../ThreeD/Vector3.html">Vector3</a> axis, <a href="http://api.dartlang.org/dart_core/num.html">num</a> angle) <a class="anchor-link" href="#setFromAxisAngle"
              title="Permalink to Quaternion.setFromAxisAngle">#</a></h4>
<div class="doc">

<pre class="source">
Quaternion setFromAxisAngle( Vector3 axis, num angle ) {
  // from http://www.euclideanspace.com/maths/geometry/rotations/conversions/angleToQuaternion/index.htm
  // axis have to be normalized

  num halfAngle = angle / 2,
    s = Math.sin( halfAngle );

  this.x = axis.x * s;
  this.y = axis.y * s;
  this.z = axis.z * s;
  this.w = Math.cos( halfAngle );

  return this;
}
</pre>
</div>
</div>
<div class="method"><h4 id="setFromEuler">
<span class="show-code">Code</span>
<a href="../ThreeD/Quaternion.html">Quaternion</a> <strong>setFromEuler</strong>(<a href="../ThreeD/Vector3.html">Vector3</a> v, [<a href="http://api.dartlang.org/dart_core/String.html">String</a> order = 'XYZ']) <a class="anchor-link" href="#setFromEuler"
              title="Permalink to Quaternion.setFromEuler">#</a></h4>
<div class="doc">

<pre class="source">
Quaternion setFromEuler( Vector3 v, [String order = 'XYZ'] ) {
  // http://www.mathworks.com/matlabcentral/fileexchange/
  //  20696-function-to-convert-between-dcm-euler-angles-quaternions-and-euler-vectors/
  //  content/SpinCalc.m

  var c1 = Math.cos( v.x / 2 );
  var c2 = Math.cos( v.y / 2 );
  var c3 = Math.cos( v.z / 2 );
  var s1 = Math.sin( v.x / 2 );
  var s2 = Math.sin( v.y / 2 );
  var s3 = Math.sin( v.z / 2 );

  if ( order === 'XYZ' ) {

    this.x = s1 * c2 * c3 + c1 * s2 * s3;
    this.y = c1 * s2 * c3 - s1 * c2 * s3;
    this.z = c1 * c2 * s3 + s1 * s2 * c3;
    this.w = c1 * c2 * c3 - s1 * s2 * s3;

  } else if ( order === 'YXZ' ) {

    this.x = s1 * c2 * c3 + c1 * s2 * s3;
    this.y = c1 * s2 * c3 - s1 * c2 * s3;
    this.z = c1 * c2 * s3 - s1 * s2 * c3;
    this.w = c1 * c2 * c3 + s1 * s2 * s3;

  } else if ( order === 'ZXY' ) {

    this.x = s1 * c2 * c3 - c1 * s2 * s3;
    this.y = c1 * s2 * c3 + s1 * c2 * s3;
    this.z = c1 * c2 * s3 + s1 * s2 * c3;
    this.w = c1 * c2 * c3 - s1 * s2 * s3;

  } else if ( order === 'ZYX' ) {

    this.x = s1 * c2 * c3 - c1 * s2 * s3;
    this.y = c1 * s2 * c3 + s1 * c2 * s3;
    this.z = c1 * c2 * s3 - s1 * s2 * c3;
    this.w = c1 * c2 * c3 + s1 * s2 * s3;

  } else if ( order === 'YZX' ) {

    this.x = s1 * c2 * c3 + c1 * s2 * s3;
    this.y = c1 * s2 * c3 + s1 * c2 * s3;
    this.z = c1 * c2 * s3 - s1 * s2 * c3;
    this.w = c1 * c2 * c3 - s1 * s2 * s3;

  } else if ( order === 'XZY' ) {

    this.x = s1 * c2 * c3 - c1 * s2 * s3;
    this.y = c1 * s2 * c3 - s1 * c2 * s3;
    this.z = c1 * c2 * s3 + s1 * s2 * c3;
    this.w = c1 * c2 * c3 + s1 * s2 * s3;

  }

  return this;

}
</pre>
</div>
</div>
<div class="method"><h4 id="setFromRotationMatrix">
<span class="show-code">Code</span>
<a href="../ThreeD/Quaternion.html">Quaternion</a> <strong>setFromRotationMatrix</strong>(<a href="../ThreeD/Matrix4.html">Matrix4</a> m) <a class="anchor-link" href="#setFromRotationMatrix"
              title="Permalink to Quaternion.setFromRotationMatrix">#</a></h4>
<div class="doc">

<pre class="source">
Quaternion setFromRotationMatrix( Matrix4 m ) {
  
  // http://www.euclideanspace.com/maths/geometry/rotations/conversions/matrixToQuaternion/index.htm

  // assumes the upper 3x3 of m is a pure rotation matrix (i.e, unscaled)

  var te = m.elements,

    m11 = te[0], m12 = te[4], m13 = te[8],
    m21 = te[1], m22 = te[5], m23 = te[9],
    m31 = te[2], m32 = te[6], m33 = te[10],

    trace = m11 + m22 + m33,
    s;

  if( trace &gt; 0 ) {

    s = 0.5 / Math.sqrt( trace + 1.0 );

    this.w = 0.25 / s;
    this.x = ( m32 - m23 ) * s;
    this.y = ( m13 - m31 ) * s;
    this.z = ( m21 - m12 ) * s;

  } else if ( m11 &gt; m22 &amp;&amp; m11 &gt; m33 ) {

    s = 2.0 * Math.sqrt( 1.0 + m11 - m22 - m33 );

    this.w = (m32 - m23 ) / s;
    this.x = 0.25 * s;
    this.y = (m12 + m21 ) / s;
    this.z = (m13 + m31 ) / s;

  } else if (m22 &gt; m33) {

    s = 2.0 * Math.sqrt( 1.0 + m22 - m11 - m33 );

    this.w = (m13 - m31 ) / s;
    this.x = (m12 + m21 ) / s;
    this.y = 0.25 * s;
    this.z = (m23 + m32 ) / s;

  } else {

    s = 2.0 * Math.sqrt( 1.0 + m33 - m11 - m22 );

    this.w = ( m21 - m12 ) / s;
    this.x = ( m13 + m31 ) / s;
    this.y = ( m23 + m32 ) / s;
    this.z = 0.25 * s;

  }

  return this;
}
</pre>
</div>
</div>
<div class="method"><h4 id="setValues">
<span class="show-code">Code</span>
<a href="../ThreeD/Quaternion.html">Quaternion</a> <strong>setValues</strong>(<a href="http://api.dartlang.org/dart_core/num.html">num</a> newX, <a href="http://api.dartlang.org/dart_core/num.html">num</a> newY, <a href="http://api.dartlang.org/dart_core/num.html">num</a> newZ, <a href="http://api.dartlang.org/dart_core/num.html">num</a> newW) <a class="anchor-link" href="#setValues"
              title="Permalink to Quaternion.setValues">#</a></h4>
<div class="doc">

<pre class="source">
Quaternion setValues( num newX, num newY, num newZ, num newW ) {
  this.x = newX;
  this.y = newY;
  this.z = newZ;
  this.w = newW;

  return this;
}
</pre>
</div>
</div>
<div class="method"><h4 id="slerpSelf">
<span class="show-code">Code</span>
<strong>slerpSelf</strong>(<a href="../ThreeD/Vector4.html">Vector4</a> qb, <a href="http://api.dartlang.org/dart_core/num.html">num</a> t) <a class="anchor-link" href="#slerpSelf"
              title="Permalink to Quaternion.slerpSelf">#</a></h4>
<div class="doc">

<pre class="source">
slerpSelf(Vector4 qb, num t ) {

  // http://www.euclideanspace.com/maths/algebra/realNormedAlgebra/quaternions/slerp/

  var cosHalfTheta = w * qb.w + x * qb.x + y * qb.y + z * qb.z;

  if ( cosHalfTheta &lt; 0 ) {

    this.w = -qb.w;
    this.x = -qb.x;
    this.y = -qb.y;
    this.z = -qb.z;

    cosHalfTheta = -cosHalfTheta;

  } else {

    this.copy( qb );

  }

  if ( cosHalfTheta &gt;= 1.0 ) {

    this.w = w;
    this.x = x;
    this.y = y;
    this.z = z;

    return this;

  }

  var halfTheta = Math.acos( cosHalfTheta );
  var sinHalfTheta = Math.sqrt( 1.0 - cosHalfTheta * cosHalfTheta );

  if ( sinHalfTheta.abs() &lt; 0.001 ) {

    this.w = 0.5 * ( w + this.w );
    this.x = 0.5 * ( x + this.x );
    this.y = 0.5 * ( y + this.y );
    this.z = 0.5 * ( z + this.z );

    return this;

  }

  var ratioA = Math.sin( ( 1 - t ) * halfTheta ) / sinHalfTheta,
  ratioB = Math.sin( t * halfTheta ) / sinHalfTheta;

  this.w = ( w * ratioA + this.w * ratioB );
  this.x = ( x * ratioA + this.x * ratioB );
  this.y = ( y * ratioA + this.y * ratioB );
  this.z = ( z * ratioA + this.z * ratioB );

  return this;

}
</pre>
</div>
</div>
<h3>Fields</h3>
<div class="field"><h4 id="w">
<span class="show-code">Code</span>
<a href="http://api.dartlang.org/dart_core/num.html">num</a>         <strong>w</strong> <a class="anchor-link"
            href="#w"
            title="Permalink to Quaternion.w">#</a>
        </h4>
        <div class="doc">

<pre class="source">
num w;
</pre>
</div>
</div>
<div class="field"><h4 id="x">
<span class="show-code">Code</span>
<a href="http://api.dartlang.org/dart_core/num.html">num</a>         <strong>x</strong> <a class="anchor-link"
            href="#x"
            title="Permalink to Quaternion.x">#</a>
        </h4>
        <div class="doc">

<pre class="source">
num x;
</pre>
</div>
</div>
<div class="field"><h4 id="y">
<span class="show-code">Code</span>
<a href="http://api.dartlang.org/dart_core/num.html">num</a>         <strong>y</strong> <a class="anchor-link"
            href="#y"
            title="Permalink to Quaternion.y">#</a>
        </h4>
        <div class="doc">

<pre class="source">
num y;
</pre>
</div>
</div>
<div class="field"><h4 id="z">
<span class="show-code">Code</span>
<a href="http://api.dartlang.org/dart_core/num.html">num</a>         <strong>z</strong> <a class="anchor-link"
            href="#z"
            title="Permalink to Quaternion.z">#</a>
        </h4>
        <div class="doc">

<pre class="source">
num z;
</pre>
</div>
</div>
        </div>
        <div class="clear"></div>
        </div>
        
        <div class="footer">
          <div>This page was generated at 2012-10-01 16:04:46.189</div>
        </div>
        <script async src="../client-static.js"></script>
        </body></html>
        
