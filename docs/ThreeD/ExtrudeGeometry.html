        <!DOCTYPE html>
        <html>
        <head>
                <meta charset="utf-8">
        <title>ExtrudeGeometry Class / ThreeD Library / Dart Documentation</title>
        <link rel="stylesheet" type="text/css"
            href="../styles.css">
        <link href="http://fonts.googleapis.com/css?family=Open+Sans:400,600,700,800" rel="stylesheet" type="text/css">
        <link rel="shortcut icon" href="../favicon.ico">
        
        </head>
        <body data-library="ThreeD" data-type="ExtrudeGeometry">
        <div class="page">
        <div class="header">
          <a href="../index.html"><div class="logo"></div></a>
          <a href="../index.html">Dart Documentation</a>
         &rsaquo; <a href="../ThreeD.html">ThreeD</a> &rsaquo; <a href="../ThreeD/ExtrudeGeometry.html">ExtrudeGeometry</a>        <div id="search-box">
          <input type="search" name="q" id="q" autocomplete="off"
              class="search-input" placeholder="Search API">
        </div>
        
      </div>
      <div class="drop-down" id="drop-down"></div>
      
        <div class="nav">
        
<h2><div class="icon-library"></div><a href="../CurveUtils.html">CurveUtils</a></h2><h2><div class="icon-library"></div><a href="../FontUtils.html">FontUtils</a></h2><h2><div class="icon-library"></div><a href="../GeometryUtils.html">GeometryUtils</a></h2><h2><div class="icon-library"></div><a href="../ImageUtils.html">ImageUtils</a></h2><h2><div class="icon-library"></div><a href="../SceneUtils.html">SceneUtils</a></h2><h2><div class="icon-library"></div><a href="../ShapeUtils.html">ShapeUtils</a></h2><h2><div class="icon-library"></div><a href="../ThreeD.html">ThreeD</a></h2><ul class="icon">
<li><a href="../ThreeD/AmbientLight.html"><div class="icon-class"></div>AmbientLight</a></li>
<li><a href="../ThreeD/ArcCurve.html"><div class="icon-class"></div>ArcCurve</a></li>
<li><a href="../ThreeD/ArrowHelper.html"><div class="icon-class"></div>ArrowHelper</a></li>
<li><a href="../ThreeD/AxisHelper.html"><div class="icon-class"></div>AxisHelper</a></li>
<li><a href="../ThreeD/Bone.html"><div class="icon-class"></div>Bone</a></li>
<li><a href="../ThreeD/BoundingBox.html"><div class="icon-class"></div>BoundingBox</a></li>
<li><a href="../ThreeD/BoundingSphere.html"><div class="icon-class"></div>BoundingSphere</a></li>
<li><a href="../ThreeD/Buffer.html"><div class="icon-class"></div>Buffer</a></li>
<li><a href="../ThreeD/BufferGeometry.html"><div class="icon-class"></div>BufferGeometry</a></li>
<li><a href="../ThreeD/Camera.html"><div class="icon-class"></div>Camera</a></li>
<li><a href="../ThreeD/CanvasRenderData.html"><div class="icon-class"></div>CanvasRenderData</a></li>
<li><a href="../ThreeD/CanvasRenderer.html"><div class="icon-class"></div>CanvasRenderer</a></li>
<li><a href="../ThreeD/CircleGeometry.html"><div class="icon-class"></div>CircleGeometry</a></li>
<li><a href="../ThreeD/ClosedSplineCurve3.html"><div class="icon-class"></div>ClosedSplineCurve3</a></li>
<li><a href="../ThreeD/Color.html"><div class="icon-class"></div>Color</a></li>
<li><a href="../ThreeD/ConvexGeometry.html"><div class="icon-class"></div>ConvexGeometry</a></li>
<li><a href="../ThreeD/CubeGeomSides.html"><div class="icon-class"></div>CubeGeomSides</a></li>
<li><a href="../ThreeD/CubeGeometry.html"><div class="icon-class"></div>CubeGeometry</a></li>
<li><a href="../ThreeD/CubeReflectionMapping.html"><div class="icon-class"></div>CubeReflectionMapping</a></li>
<li><a href="../ThreeD/CubeRefractionMapping.html"><div class="icon-class"></div>CubeRefractionMapping</a></li>
<li><a href="../ThreeD/CubicBezierCurve.html"><div class="icon-class"></div>CubicBezierCurve</a></li>
<li><a href="../ThreeD/CubicBezierCurve3.html"><div class="icon-class"></div>CubicBezierCurve3</a></li>
<li><a href="../ThreeD/Curve.html"><div class="icon-class"></div>Curve&lt;V&gt;</a></li>
<li><a href="../ThreeD/Curve2D.html"><div class="icon-class"></div>Curve2D</a></li>
<li><a href="../ThreeD/Curve3D.html"><div class="icon-class"></div>Curve3D</a></li>
<li><a href="../ThreeD/CurvePath.html"><div class="icon-class"></div>CurvePath</a></li>
<li><a href="../ThreeD/CylinderGeometry.html"><div class="icon-class"></div>CylinderGeometry</a></li>
<li><a href="../ThreeD/DataTexture.html"><div class="icon-class"></div>DataTexture</a></li>
<li><a href="../ThreeD/DirectionalLight.html"><div class="icon-class"></div>DirectionalLight</a></li>
<li><a href="../ThreeD/EllipseCurve.html"><div class="icon-class"></div>EllipseCurve</a></li>
<li><a href="../ThreeD/EventEmitter.html"><div class="icon-class"></div>EventEmitter</a></li>
<li><a href="../ThreeD/EventEmitterEvent.html"><div class="icon-class"></div>EventEmitterEvent</a></li>
<li><div class="icon-class"></div><strong>ExtrudeGeometry</strong></li>
<li><a href="../ThreeD/ExtrudeGeometryWorldUVGenerator.html"><div class="icon-class"></div>ExtrudeGeometryWorldUVGenerator</a></li>
<li><a href="../ThreeD/Face3.html"><div class="icon-class"></div>Face3</a></li>
<li><a href="../ThreeD/Face4.html"><div class="icon-class"></div>Face4</a></li>
<li><a href="../ThreeD/Fog.html"><div class="icon-class"></div>Fog</a></li>
<li><a href="../ThreeD/FogExp2.html"><div class="icon-class"></div>FogExp2</a></li>
<li><a href="../ThreeD/FogLinear.html"><div class="icon-class"></div>FogLinear</a></li>
<li><a href="../ThreeD/Frustum.html"><div class="icon-class"></div>Frustum</a></li>
<li><a href="../ThreeD/Geometry.html"><div class="icon-class"></div>Geometry</a></li>
<li><a href="../ThreeD/IFace3.html"><div class="icon-interface"></div>IFace3</a></li>
<li><a href="../ThreeD/IFace4.html"><div class="icon-interface"></div>IFace4</a></li>
<li><a href="../ThreeD/IMaterial.html"><div class="icon-interface"></div>IMaterial</a></li>
<li><a href="../ThreeD/IParticleMaterial.html"><div class="icon-interface"></div>IParticleMaterial</a></li>
<li><a href="../ThreeD/IRenderableFace3.html"><div class="icon-interface"></div>IRenderableFace3</a></li>
<li><a href="../ThreeD/IRenderableFace4.html"><div class="icon-interface"></div>IRenderableFace4</a></li>
<li><a href="../ThreeD/IRenderableObj.html"><div class="icon-interface"></div>IRenderableObj</a></li>
<li><a href="../ThreeD/ITextureMapMaterial.html"><div class="icon-interface"></div>ITextureMapMaterial</a></li>
<li><a href="../ThreeD/IVector2.html"><div class="icon-interface"></div>IVector2</a></li>
<li><a href="../ThreeD/IVector3.html"><div class="icon-interface"></div>IVector3</a></li>
<li><a href="../ThreeD/IVector4.html"><div class="icon-interface"></div>IVector4</a></li>
<li><a href="../ThreeD/IcosahedronGeometry.html"><div class="icon-class"></div>IcosahedronGeometry</a></li>
<li><a href="../ThreeD/ImageLoader.html"><div class="icon-class"></div>ImageLoader</a></li>
<li><a href="../ThreeD/ImmediateRenderObject.html"><div class="icon-class"></div>ImmediateRenderObject</a></li>
<li><a href="../ThreeD/Intersect.html"><div class="icon-class"></div>Intersect</a></li>
<li><a href="../ThreeD/JSONLoader.html"><div class="icon-class"></div>JSONLoader</a></li>
<li><a href="../ThreeD/LOD.html"><div class="icon-class"></div>LOD</a></li>
<li><a href="../ThreeD/LatheGeometry.html"><div class="icon-class"></div>LatheGeometry</a></li>
<li><a href="../ThreeD/LensFlare.html"><div class="icon-class"></div>LensFlare</a></li>
<li><a href="../ThreeD/Light.html"><div class="icon-class"></div>Light</a></li>
<li><a href="../ThreeD/Line.html"><div class="icon-class"></div>Line</a></li>
<li><a href="../ThreeD/LineBasicMaterial.html"><div class="icon-class"></div>LineBasicMaterial</a></li>
<li><a href="../ThreeD/LineCurve.html"><div class="icon-class"></div>LineCurve</a></li>
<li><a href="../ThreeD/LineCurve3.html"><div class="icon-class"></div>LineCurve3</a></li>
<li><a href="../ThreeD/LoadCompleteCallback.html"><div class="icon-interface"></div>LoadCompleteCallback</a></li>
<li><a href="../ThreeD/LoadProgressCallback.html"><div class="icon-interface"></div>LoadProgressCallback</a></li>
<li><a href="../ThreeD/LoadStartCallback.html"><div class="icon-interface"></div>LoadStartCallback</a></li>
<li><a href="../ThreeD/LoadedCallback.html"><div class="icon-interface"></div>LoadedCallback</a></li>
<li><a href="../ThreeD/Loader.html"><div class="icon-class"></div>Loader</a></li>
<li><a href="../ThreeD/Material.html"><div class="icon-class"></div>Material</a></li>
<li><a href="../ThreeD/Matrix3.html"><div class="icon-class"></div>Matrix3</a></li>
<li><a href="../ThreeD/Matrix4.html"><div class="icon-class"></div>Matrix4</a></li>
<li><a href="../ThreeD/Mesh.html"><div class="icon-class"></div>Mesh</a></li>
<li><a href="../ThreeD/MeshBasicMaterial.html"><div class="icon-class"></div>MeshBasicMaterial</a></li>
<li><a href="../ThreeD/MeshDepthMaterial.html"><div class="icon-class"></div>MeshDepthMaterial</a></li>
<li><a href="../ThreeD/MeshFaceMaterial.html"><div class="icon-class"></div>MeshFaceMaterial</a></li>
<li><a href="../ThreeD/MeshLambertMaterial.html"><div class="icon-class"></div>MeshLambertMaterial</a></li>
<li><a href="../ThreeD/MeshNormalMaterial.html"><div class="icon-class"></div>MeshNormalMaterial</a></li>
<li><a href="../ThreeD/MeshPhongMaterial.html"><div class="icon-class"></div>MeshPhongMaterial</a></li>
<li><a href="../ThreeD/MorphAnimMesh.html"><div class="icon-class"></div>MorphAnimMesh</a></li>
<li><a href="../ThreeD/Object3D.html"><div class="icon-class"></div>Object3D</a></li>
<li><a href="../ThreeD/OctahedronGeometry.html"><div class="icon-class"></div>OctahedronGeometry</a></li>
<li><a href="../ThreeD/OrthographicCamera.html"><div class="icon-class"></div>OrthographicCamera</a></li>
<li><a href="../ThreeD/ParametricGeometry.html"><div class="icon-class"></div>ParametricGeometry</a></li>
<li><a href="../ThreeD/Particle.html"><div class="icon-class"></div>Particle</a></li>
<li><a href="../ThreeD/ParticleBasicMaterial.html"><div class="icon-class"></div>ParticleBasicMaterial</a></li>
<li><a href="../ThreeD/ParticleCanvasMaterial.html"><div class="icon-class"></div>ParticleCanvasMaterial</a></li>
<li><a href="../ThreeD/ParticleCanvasMaterialProgram.html"><div class="icon-interface"></div>ParticleCanvasMaterialProgram</a></li>
<li><a href="../ThreeD/ParticleSystem.html"><div class="icon-class"></div>ParticleSystem</a></li>
<li><a href="../ThreeD/Path.html"><div class="icon-class"></div>Path</a></li>
<li><a href="../ThreeD/PathAction.html"><div class="icon-class"></div>PathAction</a></li>
<li><a href="../ThreeD/PerspectiveCamera.html"><div class="icon-class"></div>PerspectiveCamera</a></li>
<li><a href="../ThreeD/PlaneGeometry.html"><div class="icon-class"></div>PlaneGeometry</a></li>
<li><a href="../ThreeD/PointLight.html"><div class="icon-class"></div>PointLight</a></li>
<li><a href="../ThreeD/PolyhedronGeometry.html"><div class="icon-class"></div>PolyhedronGeometry</a></li>
<li><a href="../ThreeD/PolyhedronGeometryVertex.html"><div class="icon-class"></div>PolyhedronGeometryVertex</a></li>
<li><a href="../ThreeD/Program.html"><div class="icon-class"></div>Program</a></li>
<li><a href="../ThreeD/Projector.html"><div class="icon-class"></div>Projector</a></li>
<li><a href="../ThreeD/ProjectorRenderData.html"><div class="icon-class"></div>ProjectorRenderData</a></li>
<li><a href="../ThreeD/QuadraticBezierCurve.html"><div class="icon-class"></div>QuadraticBezierCurve</a></li>
<li><a href="../ThreeD/QuadraticBezierCurve3.html"><div class="icon-class"></div>QuadraticBezierCurve3</a></li>
<li><a href="../ThreeD/Quaternion.html"><div class="icon-class"></div>Quaternion</a></li>
<li><a href="../ThreeD/Ray.html"><div class="icon-class"></div>Ray</a></li>
<li><a href="../ThreeD/Rectangle.html"><div class="icon-class"></div>Rectangle</a></li>
<li><a href="../ThreeD/RenderInts.html"><div class="icon-class"></div>RenderInts</a></li>
<li><a href="../ThreeD/RenderableFace3.html"><div class="icon-class"></div>RenderableFace3</a></li>
<li><a href="../ThreeD/RenderableFace4.html"><div class="icon-class"></div>RenderableFace4</a></li>
<li><a href="../ThreeD/RenderableLine.html"><div class="icon-class"></div>RenderableLine</a></li>
<li><a href="../ThreeD/RenderableObject.html"><div class="icon-class"></div>RenderableObject</a></li>
<li><a href="../ThreeD/RenderableParticle.html"><div class="icon-class"></div>RenderableParticle</a></li>
<li><a href="../ThreeD/RenderableVertex.html"><div class="icon-class"></div>RenderableVertex</a></li>
<li><a href="../ThreeD/Renderer.html"><div class="icon-class"></div>Renderer</a></li>
<li><a href="../ThreeD/Ribbon.html"><div class="icon-class"></div>Ribbon</a></li>
<li><a href="../ThreeD/Scene.html"><div class="icon-class"></div>Scene</a></li>
<li><a href="../ThreeD/ShaderMaterial.html"><div class="icon-class"></div>ShaderMaterial</a></li>
<li><a href="../ThreeD/Shape.html"><div class="icon-class"></div>Shape</a></li>
<li><a href="../ThreeD/SkinnedMesh.html"><div class="icon-class"></div>SkinnedMesh</a></li>
<li><a href="../ThreeD/SphereGeometry.html"><div class="icon-class"></div>SphereGeometry</a></li>
<li><a href="../ThreeD/SphericalReflectionMapping.html"><div class="icon-class"></div>SphericalReflectionMapping</a></li>
<li><a href="../ThreeD/SphericalRefractionMapping.html"><div class="icon-class"></div>SphericalRefractionMapping</a></li>
<li><a href="../ThreeD/SplineCurve.html"><div class="icon-class"></div>SplineCurve</a></li>
<li><a href="../ThreeD/SplineCurve3.html"><div class="icon-class"></div>SplineCurve3</a></li>
<li><a href="../ThreeD/SpotLight.html"><div class="icon-class"></div>SpotLight</a></li>
<li><a href="../ThreeD/Sprite.html"><div class="icon-class"></div>Sprite</a></li>
<li><a href="../ThreeD/SpriteAlignment.html"><div class="icon-class"></div>SpriteAlignment</a></li>
<li><a href="../ThreeD/TetrahedronGeometry.html"><div class="icon-class"></div>TetrahedronGeometry</a></li>
<li><a href="../ThreeD/TextGeometry.html"><div class="icon-class"></div>TextGeometry</a></li>
<li><a href="../ThreeD/Texture.html"><div class="icon-class"></div>Texture</a></li>
<li><a href="../ThreeD/Three.html"><div class="icon-class"></div>Three</a></li>
<li><a href="../ThreeD/TorusGeometry.html"><div class="icon-class"></div>TorusGeometry</a></li>
<li><a href="../ThreeD/TorusKnotGeometry.html"><div class="icon-class"></div>TorusKnotGeometry</a></li>
<li><a href="../ThreeD/TubeGeometry.html"><div class="icon-class"></div>TubeGeometry</a></li>
<li><a href="../ThreeD/UV.html"><div class="icon-class"></div>UV</a></li>
<li><a href="../ThreeD/UVMapping.html"><div class="icon-class"></div>UVMapping</a></li>
<li><a href="../ThreeD/Uniform.html"><div class="icon-class"></div>Uniform</a></li>
<li><a href="../ThreeD/UniformsUtils.html"><div class="icon-class"></div>UniformsUtils</a></li>
<li><a href="../ThreeD/Vector2.html"><div class="icon-class"></div>Vector2</a></li>
<li><a href="../ThreeD/Vector3.html"><div class="icon-class"></div>Vector3</a></li>
<li><a href="../ThreeD/Vector4.html"><div class="icon-class"></div>Vector4</a></li>
<li><a href="../ThreeD/Vertex.html"><div class="icon-class"></div>Vertex</a></li>
<li><a href="../ThreeD/WebGLCamera.html"><div class="icon-class"></div>WebGLCamera</a></li>
<li><a href="../ThreeD/WebGLGeometry.html"><div class="icon-class"></div>WebGLGeometry</a></li>
<li><a href="../ThreeD/WebGLMaterial.html"><div class="icon-class"></div>WebGLMaterial</a></li>
<li><a href="../ThreeD/WebGLObject.html"><div class="icon-class"></div>WebGLObject</a></li>
<li><a href="../ThreeD/WebGLRenderTarget.html"><div class="icon-class"></div>WebGLRenderTarget</a></li>
<li><a href="../ThreeD/WebGLRenderTargetCube.html"><div class="icon-class"></div>WebGLRenderTargetCube</a></li>
<li><a href="../ThreeD/WebGLRenderer.html"><div class="icon-class"></div>WebGLRenderer</a></li>
<li><a href="../ThreeD/WebGLRendererInfo.html"><div class="icon-class"></div>WebGLRendererInfo</a></li>
<li><a href="../ThreeD/WebGLRendererMemoryInfo.html"><div class="icon-class"></div>WebGLRendererMemoryInfo</a></li>
<li><a href="../ThreeD/WebGLRendererRenderInfo.html"><div class="icon-class"></div>WebGLRendererRenderInfo</a></li>
</ul>
<h2><div class="icon-library"></div><a href="../ThreeMath.html">ThreeMath</a></h2></div>
<div class="content">
        <h2><strong>ExtrudeGeometry</strong>
          Class
        </h2>
        
<div class="doc">
<p>@author zz85 / http://www.lab4games.net/zz85/blog</p>
<p>Creates extruded geometry from a path shape.</p>
<p>parameters = {</p>
<p> size:       &lt;float>,  // size of the text
 height:     &lt;float>,  // thickness to extrude text
 curveSegments:  &lt;int>,    // number of points on the curves
 steps:      &lt;int>,    // number of points for z-side extrusions / used for subdividing segements of extrude spline too
amount: &lt;int>,  // Amount</p>
<p> bevelEnabled: &lt;bool>,     // turn on bevel
 bevelThickness: &lt;float>,    // how deep into text bevel goes
 bevelSize:    &lt;float>,    // how far from text outline is bevel
 bevelSegments:  &lt;int>,      // number of bevel layers</p>
<p> extrudePath:  &lt;THREE.CurvePath> // 2d/3d spline path to extrude shape orthogonality to
 bendPath:   &lt;THREE.CurvePath>   // 2d path for bend the shape around x/y plane</p>
<p> material:    &lt;int>  // material index for front and back faces
 extrudeMaterial: &lt;int>  // material index for extrusion and beveled faces</p>
<p> }</p>
</div>
<h3>Extends</h3>
<p>
<span class="type-box"><span class="icon-class"></span><a href="../ThreeD/Geometry.html">Geometry</a></span>&nbsp;&gt;&nbsp;<span class="type-box"><span class="icon-class"></span><strong>ExtrudeGeometry</strong></span></p>
<h3>Subclasses</h3>
<p>
<span class="type-box"><span class="icon-class"></span><a href="../ThreeD/TextGeometry.html">TextGeometry</a></span></p>
<h3>Constructors</h3>
<div class="method"><h4 id="ExtrudeGeometry">
<span class="show-code">Code</span>
new <strong>ExtrudeGeometry</strong>([<a href="http://api.dartlang.org/dart_core/List.html">List</a> shapes = null, amount = 100, bevelThickness = 6, bevelSize = null, bevelSegments = 3, bevelEnabled = true, curveSegments = 12, steps = 1, bendPath, extrudePath, material, extrudeMaterial]) <a class="anchor-link" href="#ExtrudeGeometry"
              title="Permalink to ExtrudeGeometry.ExtrudeGeometry">#</a></h4>
<div class="doc">

<pre class="source">
ExtrudeGeometry( [this.shapes = null,   
                  amount = 100, 
                  bevelThickness = 6,
                  bevelSize = null,
                  bevelSegments = 3,
                  bevelEnabled = true,
                  curveSegments = 12,
                  steps = 1,
                  bendPath,
                  extrudePath,
                  material,
                  extrudeMaterial] ) : super() {
     
  if (bevelSize == null) bevelSize = bevelThickness - 2;
                    
  if (shapes == null) {
    shapes = [];
    return;
  }

  shapebb = shapes.last().getBoundingBox();

  addShapeList( shapes, 
    amount, bevelThickness, bevelSize, bevelSegments,bevelEnabled,
    curveSegments,steps,bendPath,extrudePath,material, extrudeMaterial );

  computeCentroids();
  computeFaceNormals();

  // can't really use automatic vertex normals
  // as then front and back sides get smoothed too
  // should do separate smoothing just for sides

  //this.computeVertexNormals();

  //console.log( "took", ( Date.now() - startTime ) );

}
</pre>
</div>
</div>
<h3>Static Fields</h3>
<div class="field"><h4 id="RAD_TO_DEGREES">
<span class="show-code">Code</span>
var         <strong>RAD_TO_DEGREES</strong> <a class="anchor-link"
            href="#RAD_TO_DEGREES"
            title="Permalink to ExtrudeGeometry.RAD_TO_DEGREES">#</a>
        </h4>
        <div class="doc">

<pre class="source">
static var RAD_TO_DEGREES = 180 / Math.PI;
</pre>
</div>
</div>
<h3>Methods</h3>
<div class="method"><h4 id="addShape">
<span class="show-code">Code</span>
<strong>addShape</strong>(<a href="../ThreeD/Shape.html">Shape</a> shape, amount, bevelThickness, bevelSize, bevelSegments, bevelEnabled, curveSegments, steps, bendPath, extrudePath, material, extrudeMaterial, [<a href="../ThreeD/ExtrudeGeometryWorldUVGenerator.html">ExtrudeGeometryWorldUVGenerator</a> UVGenerator, <a href="../ThreeD/TubeGeometry.html">TubeGeometry</a> frames]) <a class="anchor-link" href="#addShape"
              title="Permalink to ExtrudeGeometry.addShape">#</a></h4>
<div class="doc">

<pre class="source">
addShape( Shape shape, amount, bevelThickness, bevelSize, bevelSegments, bevelEnabled,
          curveSegments, steps, bendPath, extrudePath, material, extrudeMaterial, 
          [ExtrudeGeometryWorldUVGenerator UVGenerator, TubeGeometry frames]) {


  var extrudePts, extrudeByPath = false;

  //shapebb = shape.getBoundingBox();

  // set UV generator
  var uvgen = (UVGenerator!= null) ? UVGenerator : new ExtrudeGeometryWorldUVGenerator();
  
  TubeGeometry splineTube;
  Vector3 binormal, normal, position2;
  
  if ( extrudePath != null ) {

    extrudePts = extrudePath.getSpacedPoints( steps );

    extrudeByPath = true;
    bevelEnabled = false; // bevels not supported for path extrusion

    // SETUP TNB variables

    // Reuse TNB from TubeGeomtry for now.
    // TODO1 - have a .isClosed in spline?
    splineTube = (frames != null) ? frames : new TubeGeometry.FrenetFrames(extrudePath, steps, false);

    // console.log(splineTube, 'splineTube', splineTube.normals.length, 'steps', steps, 'extrudePts', extrudePts.length);

    binormal = new Vector3();
    normal = new Vector3();
    position2 = new Vector3();

  }

  // Safeguards if bevels are not enabled

  if ( ! bevelEnabled ) {

    bevelSegments = 0;
    bevelThickness = 0;
    bevelSize = 0;

  }

  // Variables initalization

  List&lt;Vector2&gt; ahole;
  var h, hl; // looping of holes

  var bevelPoints = [];

  var shapesOffset = this.vertices.length;

  if ( bendPath != null ) {

    shape.addWrapPath( bendPath );

  }

  var shapePoints = shape.extractPoints();

  List vertices = shapePoints["shape"];
  List&lt;List&lt;Vector2&gt;&gt; holes = shapePoints["holes"];

  var reverse = !ShapeUtils.isClockWise( vertices ) ;

  if ( reverse ) {

    vertices = _reverse(vertices);
    
    // Maybe we should also check if holes are in the opposite direction, just to be safe ...

    for ( h = 0; h &lt; holes.length; h ++ ) {

      ahole = holes[ h ];

      if ( ShapeUtils.isClockWise( ahole ) ) {

        holes[ h ] = _reverse(ahole);

      }

    }

    reverse = false; // If vertices are in order now, we shouldn't need to worry about them again (hopefully)!

  }
  

 
  var faces = ShapeUtils.triangulateShape ( vertices, holes );
  //var faces = THREE.Shape.Utils.triangulate2( vertices, holes );

  // Would it be better to move points after triangulation?
  // shapePoints = shape.extractAllPointsWithBend( curveSegments, bendPath );
  //  vertices = shapePoints.shape;
  //  holes = shapePoints.holes;

  //console.log(faces);

  ////
  ///   Handle Vertices
  ////

  var contour = vertices; // vertices has all points but contour has only points of circumference

  for ( h = 0;  h &lt; holes.length; h ++ ) {

    ahole = holes[ h ];

    vertices = new List.from(vertices);
    vertices.addAll( ahole );

  }


  var b, bs, t, z,
    vert, vlen = vertices.length,
    face, flen = faces.length,
    cont, clen = contour.length;


  //------
  // Find directions for point movement
  //



  var contourMovements = new List(contour.length);

  num i = 0, 
      il = contour.length, 
      j = il - 1, 
      k = i + 1;
  for ( i = 0; i &lt; il; i ++ ) {

    if ( j == il ) j = 0;
    if ( k == il ) k = 0;

    //  (j)---(i)---(k)
    // console.log('i,j,k', i, j , k)

    var pt_i = contour[ i ];
    var pt_j = contour[ j ];
    var pt_k = contour[ k ];

    contourMovements[ i ]= _getBevelVec( contour[ i ], contour[ j ], contour[ k ] );
    j ++; k ++;
  }

  List  holesMovements = [], 
        oneHoleMovements, 
        verticesMovements = new List.from(contourMovements);

  for ( h = 0; h &lt; holes.length; h ++ ) {

    ahole = holes[ h ];

    oneHoleMovements = new List(ahole.length);

    i = 0;
    il = ahole.length;
    j = il - 1;
    k = i + 1;
    
    for ( i = 0; i &lt; il; i++) {

      if ( j == il ) j = 0;
      if ( k == il ) k = 0;

      //  (j)---(i)---(k)
      oneHoleMovements[ i ]= _getBevelVec( ahole[ i ], ahole[ j ], ahole[ k ] );
      j++;
      k++;
    }

    holesMovements.add( oneHoleMovements );
    verticesMovements.addAll( oneHoleMovements );

  }


  // Loop bevelSegments, 1 for the front, 1 for the back

  for ( b = 0; b &lt; bevelSegments; b ++ ) {
  //for ( b = bevelSegments; b &gt; 0; b -- ) {

    t = b / bevelSegments;
    z = bevelThickness * ( 1 - t );

    //z = bevelThickness * t;
    bs = bevelSize * ( Math.sin ( t * Math.PI/2 ) ) ; // curved
    //bs = bevelSize * t ; // linear

    // contract shape

    for ( i = 0; i &lt; contour.length; i ++ ) {

      vert = _scalePt2( contour[ i ], contourMovements[ i ], bs );
      //vert = scalePt( contour[ i ], contourCentroid, bs, false );
      _v( vert.x, vert.y,  - z );

    }

    // expand holes

    for ( h = 0; h &lt; holes.length; h++ ) {

      ahole = holes[ h ];
      oneHoleMovements = holesMovements[ h ];

      for ( i = 0; i &lt; ahole.length; i++ ) {

        vert = _scalePt2( ahole[ i ], oneHoleMovements[ i ], bs );
        //vert = scalePt( ahole[ i ], holesCentroids[ h ], bs, true );

        _v( vert.x, vert.y,  -z );

      }

    }

  }


  bs = bevelSize;

  // Back facing vertices

  for ( i = 0; i &lt; vlen; i ++ ) {

    vert = bevelEnabled ? _scalePt2( vertices[ i ], verticesMovements[ i ], bs ) : vertices[ i ];

    if ( !extrudeByPath ) {

      _v( vert.x, vert.y, 0 );

    } else {

      // v( vert.x, vert.y + extrudePts[ 0 ].y, extrudePts[ 0 ].x );

      normal.copy(splineTube.normals[0]).multiplyScalar(vert.x);
      binormal.copy(splineTube.binormals[0]).multiplyScalar(vert.y);

      position2.copy(extrudePts[0]).addSelf(normal).addSelf(binormal);

      _v(position2.x, position2.y, position2.z);

    }

  }

  // Add stepped vertices...
  // Including front facing vertices

  var s;

  for ( s = 1; s &lt;= steps; s ++ ) {

    for ( i = 0; i &lt; vlen; i ++ ) {

      vert = bevelEnabled ? _scalePt2( vertices[ i ], verticesMovements[ i ], bs ) : vertices[ i ];

      if ( !extrudeByPath ) {

        _v( vert.x, vert.y, amount / steps * s );

      } else {

        // v( vert.x, vert.y + extrudePts[ s - 1 ].y, extrudePts[ s - 1 ].x );

        normal.copy(splineTube.normals[s]).multiplyScalar(vert.x);
        binormal.copy(splineTube.binormals[s]).multiplyScalar(vert.y);

        position2.copy(extrudePts[s]).addSelf(normal).addSelf(binormal);

        _v(position2.x, position2.y, position2.z );

      }

    }

  }


  // Add bevel segments planes

  //for ( b = 1; b &lt;= bevelSegments; b ++ ) {
  for ( b = bevelSegments - 1; b &gt;= 0; b -- ) {

    t = b / bevelSegments;
    z = bevelThickness * ( 1 - t );
    //bs = bevelSize * ( 1-Math.sin ( ( 1 - t ) * Math.PI/2 ) );
    bs = bevelSize * Math.sin ( t * Math.PI/2 ) ;

    // contract shape

    for ( i = 0; i &lt; contour.length; i ++ ) {

      vert = _scalePt2( contour[ i ], contourMovements[ i ], bs );
      _v( vert.x, vert.y,  amount + z );

    }

    // expand holes

    for ( h = 0; h &lt; holes.length; h ++ ) {

      ahole = holes[ h ];
      oneHoleMovements = holesMovements[ h ];

      for ( i = 0; i &lt; ahole.length; i++ ) {

        vert = _scalePt2( ahole[ i ], oneHoleMovements[ i ], bs );

        if ( !extrudeByPath ) {

          _v( vert.x, vert.y,  amount + z );

        } else {

          _v( vert.x, vert.y + extrudePts[ steps - 1 ].y, extrudePts[ steps - 1 ].x + z );

        }

      }

    }

  }
  

  ////
  ///   Handle Faces
  ////

/////  Internal functions

  f3( a, b, c, isBottom ) {
    a += shapesOffset;
    b += shapesOffset;
    c += shapesOffset;

    // normal, color, material
    this.faces.add( new Face3( a, b, c, null, null, material ) );

    var uvs = isBottom ? uvgen.generateBottomUV( this, shape, null, a, b, c)
                       : uvgen.generateTopUV( this, shape, null, a, b, c);

    this.faceVertexUvs[ 0 ].add(uvs);
  }

  f4( a, b, c, d, wallContour, stepIndex, stepsLength ) {
    a += shapesOffset;
    b += shapesOffset;
    c += shapesOffset;
    d += shapesOffset;

    this.faces.add( new Face4( a, b, c, d, null, null, extrudeMaterial ) );
 
    var uvs = uvgen.generateSideWallUV( this, shape, wallContour, null, a, b, c, d, stepIndex, stepsLength);
    this.faceVertexUvs[ 0 ].add(uvs);
  }
  
  // Top and bottom faces
  //buildLidFaces() {
  if ( bevelEnabled ) {

    var layer = 0 ; // steps + 1
    var offset = vlen * layer;

    // Bottom faces

    for ( i = 0; i &lt; flen; i ++ ) {

      face = faces[ i ];
      f3( face[ 2 ]+ offset, face[ 1 ]+ offset, face[ 0 ] + offset, true );

    }

    layer = steps + bevelSegments * 2;
    offset = vlen * layer;

    // Top faces

    for ( i = 0; i &lt; flen; i ++ ) {
      face = faces[ i ];
      f3( face[ 0 ] + offset, face[ 1 ] + offset, face[ 2 ] + offset, false );
    }
  } else {

    // Bottom faces

    for ( i = 0; i &lt; flen; i++ ) {
      face = faces[ i ];
      f3( face[ 2 ], face[ 1 ], face[ 0 ], true );
    }

    // Top faces

    for ( i = 0; i &lt; flen; i ++ ) {
      face = faces[ i ];
      f3( face[ 0 ] + vlen * steps, face[ 1 ] + vlen * steps, face[ 2 ] + vlen * steps, false );
    }
  }
  
  sidewalls( contour, layeroffset ) {
    var i, j, k;
    i = contour.length;

    while ( --i &gt;= 0 ) {
      j = i;
      k = i - 1;
      if ( k &lt; 0 ) k = contour.length - 1;

      //console.log('b', i,j, i-1, k,vertices.length);

      var s = 0, sl = steps  + bevelSegments * 2;

      for ( s = 0; s &lt; sl; s ++ ) {
        var slen1 = vlen * s;
        var slen2 = vlen * ( s + 1 );
        var a = layeroffset + j + slen1,
          b = layeroffset + k + slen1,
          c = layeroffset + k + slen2,
          d = layeroffset + j + slen2;

        f4( a, b, c, d, contour, s, sl );
      }
    }
  }
  
  // Sides faces
  //buildSideFaces() {
  // Create faces for the z-sides of the shape
  var layeroffset = 0;
  sidewalls( contour, layeroffset );
  layeroffset += contour.length;

  for ( h = 0;  h &lt; holes.length; h ++ ) {
    ahole = holes[ h ];
    sidewalls( ahole, layeroffset );

    //, true
    layeroffset += ahole.length;
  }
}
</pre>
</div>
</div>
<div class="method"><h4 id="addShapeList">
<span class="show-code">Code</span>
<strong>addShapeList</strong>(shapes, amount, bevelThickness, bevelSize, bevelSegments, bevelEnabled, curveSegments, steps, bendPath, extrudePath, material, extrudeMaterial) <a class="anchor-link" href="#addShapeList"
              title="Permalink to ExtrudeGeometry.addShapeList">#</a></h4>
<div class="doc">

<pre class="source">
addShapeList(shapes, amount, bevelThickness, bevelSize, bevelSegments,bevelEnabled,
             curveSegments,steps,bendPath,extrudePath,material, extrudeMaterial) {
  var sl = shapes.length;

  for ( var s = 0; s &lt; sl; s ++ ) {
    var shape = shapes[ s ];
    addShape( shape, amount, bevelThickness, bevelSize, bevelSegments,bevelEnabled,
              curveSegments,steps,bendPath,extrudePath,material, extrudeMaterial );
  }
}
</pre>
</div>
</div>
<h3>Fields</h3>
<div class="field"><h4 id="shapebb">
<span class="show-code">Code</span>
var         <strong>shapebb</strong> <a class="anchor-link"
            href="#shapebb"
            title="Permalink to ExtrudeGeometry.shapebb">#</a>
        </h4>
        <div class="doc">

<pre class="source">
var shapebb;
</pre>
</div>
</div>
<div class="field"><h4 id="shapes">
<span class="show-code">Code</span>
<a href="http://api.dartlang.org/dart_core/List.html">List</a>         <strong>shapes</strong> <a class="anchor-link"
            href="#shapes"
            title="Permalink to ExtrudeGeometry.shapes">#</a>
        </h4>
        <div class="doc">

<pre class="source">
List shapes;
</pre>
</div>
</div>
        </div>
        <div class="clear"></div>
        </div>
        
        <div class="footer">
          <div>This page was generated at 2012-10-01 16:04:45.418</div>
        </div>
        <script async src="../client-static.js"></script>
        </body></html>
        
