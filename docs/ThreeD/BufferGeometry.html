        <!DOCTYPE html>
        <html>
        <head>
                <meta charset="utf-8">
        <title>BufferGeometry Class / ThreeD Library / Dart Documentation</title>
        <link rel="stylesheet" type="text/css"
            href="../styles.css">
        <link href="http://fonts.googleapis.com/css?family=Open+Sans:400,600,700,800" rel="stylesheet" type="text/css">
        <link rel="shortcut icon" href="../favicon.ico">
        
        </head>
        <body data-library="ThreeD" data-type="BufferGeometry">
        <div class="page">
        <div class="header">
          <a href="../index.html"><div class="logo"></div></a>
          <a href="../index.html">Dart Documentation</a>
         &rsaquo; <a href="../ThreeD.html">ThreeD</a> &rsaquo; <a href="../ThreeD/BufferGeometry.html">BufferGeometry</a>        <div id="search-box">
          <input type="search" name="q" id="q" autocomplete="off"
              class="search-input" placeholder="Search API">
        </div>
        
      </div>
      <div class="drop-down" id="drop-down"></div>
      
        <div class="nav">
        
<h2><div class="icon-library"></div><a href="../CurveUtils.html">CurveUtils</a></h2><h2><div class="icon-library"></div><a href="../FontUtils.html">FontUtils</a></h2><h2><div class="icon-library"></div><a href="../GeometryUtils.html">GeometryUtils</a></h2><h2><div class="icon-library"></div><a href="../ImageUtils.html">ImageUtils</a></h2><h2><div class="icon-library"></div><a href="../SceneUtils.html">SceneUtils</a></h2><h2><div class="icon-library"></div><a href="../ShapeUtils.html">ShapeUtils</a></h2><h2><div class="icon-library"></div><a href="../ThreeD.html">ThreeD</a></h2><ul class="icon">
<li><a href="../ThreeD/AmbientLight.html"><div class="icon-class"></div>AmbientLight</a></li>
<li><a href="../ThreeD/ArcCurve.html"><div class="icon-class"></div>ArcCurve</a></li>
<li><a href="../ThreeD/ArrowHelper.html"><div class="icon-class"></div>ArrowHelper</a></li>
<li><a href="../ThreeD/AxisHelper.html"><div class="icon-class"></div>AxisHelper</a></li>
<li><a href="../ThreeD/Bone.html"><div class="icon-class"></div>Bone</a></li>
<li><a href="../ThreeD/BoundingBox.html"><div class="icon-class"></div>BoundingBox</a></li>
<li><a href="../ThreeD/BoundingSphere.html"><div class="icon-class"></div>BoundingSphere</a></li>
<li><a href="../ThreeD/Buffer.html"><div class="icon-class"></div>Buffer</a></li>
<li><div class="icon-class"></div><strong>BufferGeometry</strong></li>
<li><a href="../ThreeD/Camera.html"><div class="icon-class"></div>Camera</a></li>
<li><a href="../ThreeD/CanvasRenderData.html"><div class="icon-class"></div>CanvasRenderData</a></li>
<li><a href="../ThreeD/CanvasRenderer.html"><div class="icon-class"></div>CanvasRenderer</a></li>
<li><a href="../ThreeD/CircleGeometry.html"><div class="icon-class"></div>CircleGeometry</a></li>
<li><a href="../ThreeD/ClosedSplineCurve3.html"><div class="icon-class"></div>ClosedSplineCurve3</a></li>
<li><a href="../ThreeD/Color.html"><div class="icon-class"></div>Color</a></li>
<li><a href="../ThreeD/ConvexGeometry.html"><div class="icon-class"></div>ConvexGeometry</a></li>
<li><a href="../ThreeD/CubeGeomSides.html"><div class="icon-class"></div>CubeGeomSides</a></li>
<li><a href="../ThreeD/CubeGeometry.html"><div class="icon-class"></div>CubeGeometry</a></li>
<li><a href="../ThreeD/CubeReflectionMapping.html"><div class="icon-class"></div>CubeReflectionMapping</a></li>
<li><a href="../ThreeD/CubeRefractionMapping.html"><div class="icon-class"></div>CubeRefractionMapping</a></li>
<li><a href="../ThreeD/CubicBezierCurve.html"><div class="icon-class"></div>CubicBezierCurve</a></li>
<li><a href="../ThreeD/CubicBezierCurve3.html"><div class="icon-class"></div>CubicBezierCurve3</a></li>
<li><a href="../ThreeD/Curve.html"><div class="icon-class"></div>Curve&lt;V&gt;</a></li>
<li><a href="../ThreeD/Curve2D.html"><div class="icon-class"></div>Curve2D</a></li>
<li><a href="../ThreeD/Curve3D.html"><div class="icon-class"></div>Curve3D</a></li>
<li><a href="../ThreeD/CurvePath.html"><div class="icon-class"></div>CurvePath</a></li>
<li><a href="../ThreeD/CylinderGeometry.html"><div class="icon-class"></div>CylinderGeometry</a></li>
<li><a href="../ThreeD/DataTexture.html"><div class="icon-class"></div>DataTexture</a></li>
<li><a href="../ThreeD/DirectionalLight.html"><div class="icon-class"></div>DirectionalLight</a></li>
<li><a href="../ThreeD/EllipseCurve.html"><div class="icon-class"></div>EllipseCurve</a></li>
<li><a href="../ThreeD/EventEmitter.html"><div class="icon-class"></div>EventEmitter</a></li>
<li><a href="../ThreeD/EventEmitterEvent.html"><div class="icon-class"></div>EventEmitterEvent</a></li>
<li><a href="../ThreeD/ExtrudeGeometry.html"><div class="icon-class"></div>ExtrudeGeometry</a></li>
<li><a href="../ThreeD/ExtrudeGeometryWorldUVGenerator.html"><div class="icon-class"></div>ExtrudeGeometryWorldUVGenerator</a></li>
<li><a href="../ThreeD/Face3.html"><div class="icon-class"></div>Face3</a></li>
<li><a href="../ThreeD/Face4.html"><div class="icon-class"></div>Face4</a></li>
<li><a href="../ThreeD/Fog.html"><div class="icon-class"></div>Fog</a></li>
<li><a href="../ThreeD/FogExp2.html"><div class="icon-class"></div>FogExp2</a></li>
<li><a href="../ThreeD/FogLinear.html"><div class="icon-class"></div>FogLinear</a></li>
<li><a href="../ThreeD/Frustum.html"><div class="icon-class"></div>Frustum</a></li>
<li><a href="../ThreeD/Geometry.html"><div class="icon-class"></div>Geometry</a></li>
<li><a href="../ThreeD/IFace3.html"><div class="icon-interface"></div>IFace3</a></li>
<li><a href="../ThreeD/IFace4.html"><div class="icon-interface"></div>IFace4</a></li>
<li><a href="../ThreeD/IMaterial.html"><div class="icon-interface"></div>IMaterial</a></li>
<li><a href="../ThreeD/IParticleMaterial.html"><div class="icon-interface"></div>IParticleMaterial</a></li>
<li><a href="../ThreeD/IRenderableFace3.html"><div class="icon-interface"></div>IRenderableFace3</a></li>
<li><a href="../ThreeD/IRenderableFace4.html"><div class="icon-interface"></div>IRenderableFace4</a></li>
<li><a href="../ThreeD/IRenderableObj.html"><div class="icon-interface"></div>IRenderableObj</a></li>
<li><a href="../ThreeD/ITextureMapMaterial.html"><div class="icon-interface"></div>ITextureMapMaterial</a></li>
<li><a href="../ThreeD/IVector2.html"><div class="icon-interface"></div>IVector2</a></li>
<li><a href="../ThreeD/IVector3.html"><div class="icon-interface"></div>IVector3</a></li>
<li><a href="../ThreeD/IVector4.html"><div class="icon-interface"></div>IVector4</a></li>
<li><a href="../ThreeD/IcosahedronGeometry.html"><div class="icon-class"></div>IcosahedronGeometry</a></li>
<li><a href="../ThreeD/ImageLoader.html"><div class="icon-class"></div>ImageLoader</a></li>
<li><a href="../ThreeD/ImmediateRenderObject.html"><div class="icon-class"></div>ImmediateRenderObject</a></li>
<li><a href="../ThreeD/Intersect.html"><div class="icon-class"></div>Intersect</a></li>
<li><a href="../ThreeD/JSONLoader.html"><div class="icon-class"></div>JSONLoader</a></li>
<li><a href="../ThreeD/LOD.html"><div class="icon-class"></div>LOD</a></li>
<li><a href="../ThreeD/LatheGeometry.html"><div class="icon-class"></div>LatheGeometry</a></li>
<li><a href="../ThreeD/LensFlare.html"><div class="icon-class"></div>LensFlare</a></li>
<li><a href="../ThreeD/Light.html"><div class="icon-class"></div>Light</a></li>
<li><a href="../ThreeD/Line.html"><div class="icon-class"></div>Line</a></li>
<li><a href="../ThreeD/LineBasicMaterial.html"><div class="icon-class"></div>LineBasicMaterial</a></li>
<li><a href="../ThreeD/LineCurve.html"><div class="icon-class"></div>LineCurve</a></li>
<li><a href="../ThreeD/LineCurve3.html"><div class="icon-class"></div>LineCurve3</a></li>
<li><a href="../ThreeD/LoadCompleteCallback.html"><div class="icon-interface"></div>LoadCompleteCallback</a></li>
<li><a href="../ThreeD/LoadProgressCallback.html"><div class="icon-interface"></div>LoadProgressCallback</a></li>
<li><a href="../ThreeD/LoadStartCallback.html"><div class="icon-interface"></div>LoadStartCallback</a></li>
<li><a href="../ThreeD/LoadedCallback.html"><div class="icon-interface"></div>LoadedCallback</a></li>
<li><a href="../ThreeD/Loader.html"><div class="icon-class"></div>Loader</a></li>
<li><a href="../ThreeD/Material.html"><div class="icon-class"></div>Material</a></li>
<li><a href="../ThreeD/Matrix3.html"><div class="icon-class"></div>Matrix3</a></li>
<li><a href="../ThreeD/Matrix4.html"><div class="icon-class"></div>Matrix4</a></li>
<li><a href="../ThreeD/Mesh.html"><div class="icon-class"></div>Mesh</a></li>
<li><a href="../ThreeD/MeshBasicMaterial.html"><div class="icon-class"></div>MeshBasicMaterial</a></li>
<li><a href="../ThreeD/MeshDepthMaterial.html"><div class="icon-class"></div>MeshDepthMaterial</a></li>
<li><a href="../ThreeD/MeshFaceMaterial.html"><div class="icon-class"></div>MeshFaceMaterial</a></li>
<li><a href="../ThreeD/MeshLambertMaterial.html"><div class="icon-class"></div>MeshLambertMaterial</a></li>
<li><a href="../ThreeD/MeshNormalMaterial.html"><div class="icon-class"></div>MeshNormalMaterial</a></li>
<li><a href="../ThreeD/MeshPhongMaterial.html"><div class="icon-class"></div>MeshPhongMaterial</a></li>
<li><a href="../ThreeD/MorphAnimMesh.html"><div class="icon-class"></div>MorphAnimMesh</a></li>
<li><a href="../ThreeD/Object3D.html"><div class="icon-class"></div>Object3D</a></li>
<li><a href="../ThreeD/OctahedronGeometry.html"><div class="icon-class"></div>OctahedronGeometry</a></li>
<li><a href="../ThreeD/OrthographicCamera.html"><div class="icon-class"></div>OrthographicCamera</a></li>
<li><a href="../ThreeD/ParametricGeometry.html"><div class="icon-class"></div>ParametricGeometry</a></li>
<li><a href="../ThreeD/Particle.html"><div class="icon-class"></div>Particle</a></li>
<li><a href="../ThreeD/ParticleBasicMaterial.html"><div class="icon-class"></div>ParticleBasicMaterial</a></li>
<li><a href="../ThreeD/ParticleCanvasMaterial.html"><div class="icon-class"></div>ParticleCanvasMaterial</a></li>
<li><a href="../ThreeD/ParticleCanvasMaterialProgram.html"><div class="icon-interface"></div>ParticleCanvasMaterialProgram</a></li>
<li><a href="../ThreeD/ParticleSystem.html"><div class="icon-class"></div>ParticleSystem</a></li>
<li><a href="../ThreeD/Path.html"><div class="icon-class"></div>Path</a></li>
<li><a href="../ThreeD/PathAction.html"><div class="icon-class"></div>PathAction</a></li>
<li><a href="../ThreeD/PerspectiveCamera.html"><div class="icon-class"></div>PerspectiveCamera</a></li>
<li><a href="../ThreeD/PlaneGeometry.html"><div class="icon-class"></div>PlaneGeometry</a></li>
<li><a href="../ThreeD/PointLight.html"><div class="icon-class"></div>PointLight</a></li>
<li><a href="../ThreeD/PolyhedronGeometry.html"><div class="icon-class"></div>PolyhedronGeometry</a></li>
<li><a href="../ThreeD/PolyhedronGeometryVertex.html"><div class="icon-class"></div>PolyhedronGeometryVertex</a></li>
<li><a href="../ThreeD/Program.html"><div class="icon-class"></div>Program</a></li>
<li><a href="../ThreeD/Projector.html"><div class="icon-class"></div>Projector</a></li>
<li><a href="../ThreeD/ProjectorRenderData.html"><div class="icon-class"></div>ProjectorRenderData</a></li>
<li><a href="../ThreeD/QuadraticBezierCurve.html"><div class="icon-class"></div>QuadraticBezierCurve</a></li>
<li><a href="../ThreeD/QuadraticBezierCurve3.html"><div class="icon-class"></div>QuadraticBezierCurve3</a></li>
<li><a href="../ThreeD/Quaternion.html"><div class="icon-class"></div>Quaternion</a></li>
<li><a href="../ThreeD/Ray.html"><div class="icon-class"></div>Ray</a></li>
<li><a href="../ThreeD/Rectangle.html"><div class="icon-class"></div>Rectangle</a></li>
<li><a href="../ThreeD/RenderInts.html"><div class="icon-class"></div>RenderInts</a></li>
<li><a href="../ThreeD/RenderableFace3.html"><div class="icon-class"></div>RenderableFace3</a></li>
<li><a href="../ThreeD/RenderableFace4.html"><div class="icon-class"></div>RenderableFace4</a></li>
<li><a href="../ThreeD/RenderableLine.html"><div class="icon-class"></div>RenderableLine</a></li>
<li><a href="../ThreeD/RenderableObject.html"><div class="icon-class"></div>RenderableObject</a></li>
<li><a href="../ThreeD/RenderableParticle.html"><div class="icon-class"></div>RenderableParticle</a></li>
<li><a href="../ThreeD/RenderableVertex.html"><div class="icon-class"></div>RenderableVertex</a></li>
<li><a href="../ThreeD/Renderer.html"><div class="icon-class"></div>Renderer</a></li>
<li><a href="../ThreeD/Ribbon.html"><div class="icon-class"></div>Ribbon</a></li>
<li><a href="../ThreeD/Scene.html"><div class="icon-class"></div>Scene</a></li>
<li><a href="../ThreeD/ShaderMaterial.html"><div class="icon-class"></div>ShaderMaterial</a></li>
<li><a href="../ThreeD/Shape.html"><div class="icon-class"></div>Shape</a></li>
<li><a href="../ThreeD/SkinnedMesh.html"><div class="icon-class"></div>SkinnedMesh</a></li>
<li><a href="../ThreeD/SphereGeometry.html"><div class="icon-class"></div>SphereGeometry</a></li>
<li><a href="../ThreeD/SphericalReflectionMapping.html"><div class="icon-class"></div>SphericalReflectionMapping</a></li>
<li><a href="../ThreeD/SphericalRefractionMapping.html"><div class="icon-class"></div>SphericalRefractionMapping</a></li>
<li><a href="../ThreeD/SplineCurve.html"><div class="icon-class"></div>SplineCurve</a></li>
<li><a href="../ThreeD/SplineCurve3.html"><div class="icon-class"></div>SplineCurve3</a></li>
<li><a href="../ThreeD/SpotLight.html"><div class="icon-class"></div>SpotLight</a></li>
<li><a href="../ThreeD/Sprite.html"><div class="icon-class"></div>Sprite</a></li>
<li><a href="../ThreeD/SpriteAlignment.html"><div class="icon-class"></div>SpriteAlignment</a></li>
<li><a href="../ThreeD/TetrahedronGeometry.html"><div class="icon-class"></div>TetrahedronGeometry</a></li>
<li><a href="../ThreeD/TextGeometry.html"><div class="icon-class"></div>TextGeometry</a></li>
<li><a href="../ThreeD/Texture.html"><div class="icon-class"></div>Texture</a></li>
<li><a href="../ThreeD/Three.html"><div class="icon-class"></div>Three</a></li>
<li><a href="../ThreeD/TorusGeometry.html"><div class="icon-class"></div>TorusGeometry</a></li>
<li><a href="../ThreeD/TorusKnotGeometry.html"><div class="icon-class"></div>TorusKnotGeometry</a></li>
<li><a href="../ThreeD/TubeGeometry.html"><div class="icon-class"></div>TubeGeometry</a></li>
<li><a href="../ThreeD/UV.html"><div class="icon-class"></div>UV</a></li>
<li><a href="../ThreeD/UVMapping.html"><div class="icon-class"></div>UVMapping</a></li>
<li><a href="../ThreeD/Uniform.html"><div class="icon-class"></div>Uniform</a></li>
<li><a href="../ThreeD/UniformsUtils.html"><div class="icon-class"></div>UniformsUtils</a></li>
<li><a href="../ThreeD/Vector2.html"><div class="icon-class"></div>Vector2</a></li>
<li><a href="../ThreeD/Vector3.html"><div class="icon-class"></div>Vector3</a></li>
<li><a href="../ThreeD/Vector4.html"><div class="icon-class"></div>Vector4</a></li>
<li><a href="../ThreeD/Vertex.html"><div class="icon-class"></div>Vertex</a></li>
<li><a href="../ThreeD/WebGLCamera.html"><div class="icon-class"></div>WebGLCamera</a></li>
<li><a href="../ThreeD/WebGLGeometry.html"><div class="icon-class"></div>WebGLGeometry</a></li>
<li><a href="../ThreeD/WebGLMaterial.html"><div class="icon-class"></div>WebGLMaterial</a></li>
<li><a href="../ThreeD/WebGLObject.html"><div class="icon-class"></div>WebGLObject</a></li>
<li><a href="../ThreeD/WebGLRenderTarget.html"><div class="icon-class"></div>WebGLRenderTarget</a></li>
<li><a href="../ThreeD/WebGLRenderTargetCube.html"><div class="icon-class"></div>WebGLRenderTargetCube</a></li>
<li><a href="../ThreeD/WebGLRenderer.html"><div class="icon-class"></div>WebGLRenderer</a></li>
<li><a href="../ThreeD/WebGLRendererInfo.html"><div class="icon-class"></div>WebGLRendererInfo</a></li>
<li><a href="../ThreeD/WebGLRendererMemoryInfo.html"><div class="icon-class"></div>WebGLRendererMemoryInfo</a></li>
<li><a href="../ThreeD/WebGLRendererRenderInfo.html"><div class="icon-class"></div>WebGLRendererRenderInfo</a></li>
</ul>
<h2><div class="icon-library"></div><a href="../ThreeMath.html">ThreeMath</a></h2></div>
<div class="content">
        <h2><strong>BufferGeometry</strong>
          Class
        </h2>
        
<div class="doc">

</div>
<h3>Constructors</h3>
<div class="method"><h4 id="BufferGeometry">
<span class="show-code">Code</span>
new <strong>BufferGeometry</strong>() <a class="anchor-link" href="#BufferGeometry"
              title="Permalink to BufferGeometry.BufferGeometry">#</a></h4>
<div class="doc">

<pre class="source">
BufferGeometry() :
		id = Three.GeometryCount ++,
		attributes = {},
		_dynamic = false,
		boundingBox = null,
		boundingSphere = null,
		hasTangents = false,
		morphTargets = [];
</pre>
</div>
</div>
<h3>Methods</h3>
<div class="method"><h4 id="applyMatrix">
<span class="show-code">Code</span>
<strong>applyMatrix</strong>(matrix) <a class="anchor-link" href="#applyMatrix"
              title="Permalink to BufferGeometry.applyMatrix">#</a></h4>
<div class="doc">

<pre class="source">
applyMatrix ( matrix ) {

		var positionArray;
		var normalArray;

		if ( this.attributes[ "position" ] ) positionArray = this.attributes[ "position" ].array;
		if ( this.attributes[ "normal" ] ) normalArray = this.attributes[ "normal" ].array;

		if ( positionArray != null) {

			matrix.multiplyVector3Array( positionArray );
			this.verticesNeedUpdate = true;

		}

		if ( normalArray != null ) {

			var matrixRotation = new Matrix4();
			matrixRotation.extractRotation( matrix );

			matrixRotation.multiplyVector3Array( normalArray );
			this.normalsNeedUpdate = true;

		}

	}
</pre>
</div>
</div>
<div class="method"><h4 id="computeBoundingBox">
<span class="show-code">Code</span>
<strong>computeBoundingBox</strong>() <a class="anchor-link" href="#computeBoundingBox"
              title="Permalink to BufferGeometry.computeBoundingBox">#</a></h4>
<div class="doc">

<pre class="source">
computeBoundingBox () {

		if ( boundingBox == null ) {

			this.boundingBox = new BoundingBox(
				min: new Vector3( double.INFINITY, double.INFINITY, double.INFINITY ),
				max: new Vector3( -double.INFINITY, -double.INFINITY, -double.INFINITY )
			);

		}

		var positions = this.attributes[ "position" ].array;

		if ( positions ) {

			var bb = this.boundingBox;
			var x, y, z;

			for ( var i = 0, il = positions.length; i &lt; il; i += 3 ) {

				x = positions[ i ];
				y = positions[ i + 1 ];
				z = positions[ i + 2 ];

				// bounding box

				if ( x &lt; bb.min.x ) {

					bb.min.x = x;

				} else if ( x &gt; bb.max.x ) {

					bb.max.x = x;

				}

				if ( y &lt; bb.min.y ) {

					bb.min.y = y;

				} else if ( y &gt; bb.max.y ) {

					bb.max.y = y;

				}

				if ( z &lt; bb.min.z ) {

					bb.min.z = z;

				} else if ( z &gt; bb.max.z ) {

					bb.max.z = z;

				}

			}

		}

		if ( positions == null || positions.length === 0 ) {

			this.boundingBox.min.set( 0, 0, 0 );
			this.boundingBox.max.set( 0, 0, 0 );

		}

	}
</pre>
</div>
</div>
<div class="method"><h4 id="computeBoundingSphere">
<span class="show-code">Code</span>
<strong>computeBoundingSphere</strong>() <a class="anchor-link" href="#computeBoundingSphere"
              title="Permalink to BufferGeometry.computeBoundingSphere">#</a></h4>
<div class="doc">

<pre class="source">
computeBoundingSphere() {

		if ( ! this.boundingSphere ) this.boundingSphere = new BoundingSphere( radius: 0 );

		var positions = this.attributes[ "position" ].array;

		if ( positions ) {

			var radiusSq, maxRadiusSq = 0;
			var x, y, z;

			for ( var i = 0, il = positions.length; i &lt; il; i += 3 ) {

				x = positions[ i ];
				y = positions[ i + 1 ];
				z = positions[ i + 2 ];

				radiusSq =  x * x + y * y + z * z;
				if ( radiusSq &gt; maxRadiusSq ) maxRadiusSq = radiusSq;

			}

			this.boundingSphere.radius = Math.sqrt( maxRadiusSq );

		}

	}
</pre>
</div>
</div>
<div class="method"><h4 id="computeTangents">
<span class="show-code">Code</span>
<strong>computeTangents</strong>() <a class="anchor-link" href="#computeTangents"
              title="Permalink to BufferGeometry.computeTangents">#</a></h4>
<div class="doc">

<pre class="source">
computeTangents() {

		// based on http://www.terathon.com/code/tangent.html
		// (per vertex tangents)

		if ( attributes[ "index" ] == null ||
			   attributes[ "position" ] == null ||
			   attributes[ "normal" ] == null ||
			   attributes[ "uv" ] == null ) {

			print( "Missing required attributes (index, position, normal or uv) in BufferGeometry.computeTangents()" );
			return;

		}

		var indices = attributes[ "index" ].array;
		var positions = attributes[ "position" ].array;
		var normals = attributes[ "normal" ].array;
		var uvs = attributes[ "uv" ].array;

		var nVertices = positions.length / 3;

		if ( attributes[ "tangent" ] == null ) {

			var nTangentElements = 4 * nVertices;

			var tangent = new Dynamic();
			tangent.itemSize = 4;
			tangent.array = new Float32Array( nTangentElements );
     tangent.numItems = nTangentElements;
			attributes[ "tangent" ] = tangent;

		}

		var tangents = attributes[ "tangent" ].array;

		List&lt;Vector3&gt; tan1 = [], tan2 = [];

		for ( var k = 0; k &lt; nVertices; k ++ ) {

			tan1[ k ] = new Vector3();
			tan2[ k ] = new Vector3();

		}

		var xA, yA, zA,
			xB, yB, zB,
			xC, yC, zC,

			uA, vA,
			uB, vB,
			uC, vC,

			x1, x2, y1, y2, z1, z2,
			s1, s2, t1, t2, r;

		var sdir = new Vector3(), 
		    tdir = new Vector3();

		var handleTriangle = ( a, b, c ) {

			xA = positions[ a * 3 ];
			yA = positions[ a * 3 + 1 ];
			zA = positions[ a * 3 + 2 ];

			xB = positions[ b * 3 ];
			yB = positions[ b * 3 + 1 ];
			zB = positions[ b * 3 + 2 ];

			xC = positions[ c * 3 ];
			yC = positions[ c * 3 + 1 ];
			zC = positions[ c * 3 + 2 ];

			uA = uvs[ a * 2 ];
			vA = uvs[ a * 2 + 1 ];

			uB = uvs[ b * 2 ];
			vB = uvs[ b * 2 + 1 ];

			uC = uvs[ c * 2 ];
			vC = uvs[ c * 2 + 1 ];

			x1 = xB - xA;
			x2 = xC - xA;

			y1 = yB - yA;
			y2 = yC - yA;

			z1 = zB - zA;
			z2 = zC - zA;

			s1 = uB - uA;
			s2 = uC - uA;

			t1 = vB - vA;
			t2 = vC - vA;

			r = 1.0 / ( s1 * t2 - s2 * t1 );

			sdir.setValues(
				( t2 * x1 - t1 * x2 ) * r,
				( t2 * y1 - t1 * y2 ) * r,
				( t2 * z1 - t1 * z2 ) * r
			);

			tdir.setValues(
				( s1 * x2 - s2 * x1 ) * r,
				( s1 * y2 - s2 * y1 ) * r,
				( s1 * z2 - s2 * z1 ) * r
			);

			tan1[ a ].addSelf( sdir );
			tan1[ b ].addSelf( sdir );
			tan1[ c ].addSelf( sdir );

			tan2[ a ].addSelf( tdir );
			tan2[ b ].addSelf( tdir );
			tan2[ c ].addSelf( tdir );

		};

		var i, il;
		var j, jl;
		var iA, iB, iC;

		jl = offsets.length;
		for ( j = 0; j &lt; jl; ++ j ) {

			var start = offsets[ j ].start;
			var count = offsets[ j ].count;
			var index = offsets[ j ].index;

			il = start + count;
			for ( i = start; i &lt; il; i += 3 ) {

				iA = index + indices[ i ];
				iB = index + indices[ i + 1 ];
				iC = index + indices[ i + 2 ];

				handleTriangle( iA, iB, iC );

			}

		}

		var tmp = new Vector3(), 
		    tmp2 = new Vector3();
		var n = new Vector3(), 
		    n2 = new Vector3();
		var w, t, test;
		var nx, ny, nz;

		var handleVertex = ( v ) {

			n.x = normals[ v * 3 ];
			n.y = normals[ v * 3 + 1 ];
			n.z = normals[ v * 3 + 2 ];

			n2.copy( n );

			t = tan1[ v ];

			// Gram-Schmidt orthogonalize

			tmp.copy( t );
			tmp.subSelf( n.multiplyScalar( n.dot( t ) ) ).normalize();

			// Calculate handedness

			tmp2.cross( n2, t );
			test = tmp2.dot( tan2[ v ] );
			w = ( test &lt; 0.0 ) ? -1.0 : 1.0;

			tangents[ v * 4 ] 	  = tmp.x;
			tangents[ v * 4 + 1 ] = tmp.y;
			tangents[ v * 4 + 2 ] = tmp.z;
			tangents[ v * 4 + 3 ] = w;

		};

		jl = offsets.length;
		for ( j = 0; j &lt; jl; ++ j ) {

			var start = offsets[ j ].start;
			var count = offsets[ j ].count;
			var index = offsets[ j ].index;

			il = start + count;
			for ( i = start; i &lt; il; i += 3 ) {

				iA = index + indices[ i ];
				iB = index + indices[ i + 1 ];
				iC = index + indices[ i + 2 ];

				handleVertex( iA );
				handleVertex( iB );
				handleVertex( iC );

			}

		}

		hasTangents = true;
		tangentsNeedUpdate = true;

	}
</pre>
</div>
</div>
<div class="method"><h4 id="computeVertexNormals">
<span class="show-code">Code</span>
<strong>computeVertexNormals</strong>() <a class="anchor-link" href="#computeVertexNormals"
              title="Permalink to BufferGeometry.computeVertexNormals">#</a></h4>
<div class="doc">

<pre class="source">
computeVertexNormals() {

		if ( this.attributes[ "position" ] &amp;&amp; this.attributes[ "index" ] ) {

			var i, il;
			var j, jl;

			var nVertexElements = this.attributes[ "position" ].array.length;

			if ( this.attributes[ "normal" ] == null ) {

			  var normal = new Dynamic();
			  normal.itemSize = 3;
			  normal.array = new Float32Array( nVertexElements );
			  normal.numItems = nVertexElements;
				this.attributes[ "normal" ] = normal;

			} else {

				// reset existing normals to zero
			  il = attributes[ "normal" ].array.length;
			  
				for ( i = 0; i &lt; il; i ++ ) {

					attributes[ "normal" ].array[ i ] = 0;

				}

			}

			var indices = this.attributes[ "index" ].array;
			var positions = this.attributes[ "position" ].array;
			var normals = this.attributes[ "normal" ].array;

			var vA, vB, vC, x, y, z,

			pA = new Vector3(),
			pB = new Vector3(),
			pC = new Vector3(),

			cb = new Vector3(),
			ab = new Vector3();

			jl = offsets.length;
			for ( j = 0; j &lt; jl; ++ j ) {

				var start = offsets[ j ].start;
				var count = offsets[ j ].count;
				var index = offsets[ j ].index;

				il = start + count;
				for ( i = start; i &lt; il; i += 3 ) {

					vA = index + indices[ i ];
					vB = index + indices[ i + 1 ];
					vC = index + indices[ i + 2 ];

					x = positions[ vA * 3 ];
					y = positions[ vA * 3 + 1 ];
					z = positions[ vA * 3 + 2 ];
					pA.setValues( x, y, z );

					x = positions[ vB * 3 ];
					y = positions[ vB * 3 + 1 ];
					z = positions[ vB * 3 + 2 ];
					pB.setValues( x, y, z );

					x = positions[ vC * 3 ];
					y = positions[ vC * 3 + 1 ];
					z = positions[ vC * 3 + 2 ];
					pC.setValues( x, y, z );

					cb.sub( pC, pB );
					ab.sub( pA, pB );
					cb.crossSelf( ab );

					normals[ vA * 3 ] += cb.x;
					normals[ vA * 3 + 1 ] += cb.y;
					normals[ vA * 3 + 2 ] += cb.z;

					normals[ vB * 3 ] += cb.x;
					normals[ vB * 3 + 1 ] += cb.y;
					normals[ vB * 3 + 2 ] += cb.z;

					normals[ vC * 3 ] += cb.x;
					normals[ vC * 3 + 1 ] += cb.y;
					normals[ vC * 3 + 2 ] += cb.z;

				}

			}

			// normalize normals
			il = normals.length;
			for ( i = 0; i &lt; il; i += 3 ) {

				x = normals[ i ];
				y = normals[ i + 1 ];
				z = normals[ i + 2 ];

				var n = 1.0 / Math.sqrt( x * x + y * y + z * z );

				normals[ i ] *= n;
				normals[ i + 1 ] *= n;
				normals[ i + 2 ] *= n;

			}

			normalsNeedUpdate = true;

		}

	}
</pre>
</div>
</div>
<h3>Fields</h3>
<div class="field"><h4 id="attributes">
<span class="show-code">Code</span>
<a href="http://api.dartlang.org/dart_core/Map.html">Map</a>         <strong>attributes</strong> <a class="anchor-link"
            href="#attributes"
            title="Permalink to BufferGeometry.attributes">#</a>
        </h4>
        <div class="doc">

<pre class="source">
Map attributes;
</pre>
</div>
</div>
<div class="field"><h4 id="boundingBox">
<span class="show-code">Code</span>
var         <strong>boundingBox</strong> <a class="anchor-link"
            href="#boundingBox"
            title="Permalink to BufferGeometry.boundingBox">#</a>
        </h4>
        <div class="doc">

<pre class="source">
var boundingBox;
</pre>
</div>
</div>
<div class="field"><h4 id="boundingSphere">
<span class="show-code">Code</span>
var         <strong>boundingSphere</strong> <a class="anchor-link"
            href="#boundingSphere"
            title="Permalink to BufferGeometry.boundingSphere">#</a>
        </h4>
        <div class="doc">

<pre class="source">
var boundingSphere;
</pre>
</div>
</div>
<div class="field"><h4 id="colorsNeedUpdate">
<span class="show-code">Code</span>
<a href="http://api.dartlang.org/dart_core/bool.html">bool</a>         <strong>colorsNeedUpdate</strong> <a class="anchor-link"
            href="#colorsNeedUpdate"
            title="Permalink to BufferGeometry.colorsNeedUpdate">#</a>
        </h4>
        <div class="doc">

<pre class="source">
bool elementsNeedUpdate, uvsNeedUpdate,colorsNeedUpdate;
</pre>
</div>
</div>
<div class="field"><h4 id="elementsNeedUpdate">
<span class="show-code">Code</span>
<a href="http://api.dartlang.org/dart_core/bool.html">bool</a>         <strong>elementsNeedUpdate</strong> <a class="anchor-link"
            href="#elementsNeedUpdate"
            title="Permalink to BufferGeometry.elementsNeedUpdate">#</a>
        </h4>
        <div class="doc">

<pre class="source">
bool elementsNeedUpdate, uvsNeedUpdate,colorsNeedUpdate;
</pre>
</div>
</div>
<div class="field"><h4 id="hasTangents">
<span class="show-code">Code</span>
<a href="http://api.dartlang.org/dart_core/bool.html">bool</a>         <strong>hasTangents</strong> <a class="anchor-link"
            href="#hasTangents"
            title="Permalink to BufferGeometry.hasTangents">#</a>
        </h4>
        <div class="doc">

<pre class="source">
bool hasTangents;
</pre>
</div>
</div>
<div class="field"><h4 id="id">
<span class="show-code">Code</span>
<a href="http://api.dartlang.org/dart_core/int.html">int</a>         <strong>id</strong> <a class="anchor-link"
            href="#id"
            title="Permalink to BufferGeometry.id">#</a>
        </h4>
        <div class="doc">

<pre class="source">
int id;
</pre>
</div>
</div>
<div class="field"><h4 id="morphTargets">
<span class="show-code">Code</span>
<a href="http://api.dartlang.org/dart_core/List.html">List</a>         <strong>morphTargets</strong> <a class="anchor-link"
            href="#morphTargets"
            title="Permalink to BufferGeometry.morphTargets">#</a>
        </h4>
        <div class="doc">

<pre class="source">
List morphTargets;
</pre>
</div>
</div>
<div class="field"><h4 id="normalsNeedUpdate">
<span class="show-code">Code</span>
<a href="http://api.dartlang.org/dart_core/bool.html">bool</a>         <strong>normalsNeedUpdate</strong> <a class="anchor-link"
            href="#normalsNeedUpdate"
            title="Permalink to BufferGeometry.normalsNeedUpdate">#</a>
        </h4>
        <div class="doc">

<pre class="source">
bool verticesNeedUpdate, normalsNeedUpdate, tangentsNeedUpdate;
</pre>
</div>
</div>
<div class="field"><h4 id="offsets">
<span class="show-code">Code</span>
var         <strong>offsets</strong> <a class="anchor-link"
            href="#offsets"
            title="Permalink to BufferGeometry.offsets">#</a>
        </h4>
        <div class="doc">

<pre class="source">
var offsets;
</pre>
</div>
</div>
<div class="field"><h4 id="tangentsNeedUpdate">
<span class="show-code">Code</span>
<a href="http://api.dartlang.org/dart_core/bool.html">bool</a>         <strong>tangentsNeedUpdate</strong> <a class="anchor-link"
            href="#tangentsNeedUpdate"
            title="Permalink to BufferGeometry.tangentsNeedUpdate">#</a>
        </h4>
        <div class="doc">

<pre class="source">
bool verticesNeedUpdate, normalsNeedUpdate, tangentsNeedUpdate;
</pre>
</div>
</div>
<div class="field"><h4 id="uvsNeedUpdate">
<span class="show-code">Code</span>
<a href="http://api.dartlang.org/dart_core/bool.html">bool</a>         <strong>uvsNeedUpdate</strong> <a class="anchor-link"
            href="#uvsNeedUpdate"
            title="Permalink to BufferGeometry.uvsNeedUpdate">#</a>
        </h4>
        <div class="doc">

<pre class="source">
bool elementsNeedUpdate, uvsNeedUpdate,colorsNeedUpdate;
</pre>
</div>
</div>
<div class="field"><h4 id="verticesNeedUpdate">
<span class="show-code">Code</span>
<a href="http://api.dartlang.org/dart_core/bool.html">bool</a>         <strong>verticesNeedUpdate</strong> <a class="anchor-link"
            href="#verticesNeedUpdate"
            title="Permalink to BufferGeometry.verticesNeedUpdate">#</a>
        </h4>
        <div class="doc">

<pre class="source">
bool verticesNeedUpdate, normalsNeedUpdate, tangentsNeedUpdate;
</pre>
</div>
</div>
        </div>
        <div class="clear"></div>
        </div>
        
        <div class="footer">
          <div>This page was generated at 2012-10-01 16:04:45.866</div>
        </div>
        <script async src="../client-static.js"></script>
        </body></html>
        
