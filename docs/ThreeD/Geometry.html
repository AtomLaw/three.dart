        <!DOCTYPE html>
        <html>
        <head>
                <meta charset="utf-8">
        <title>Geometry Class / ThreeD Library / Dart Documentation</title>
        <link rel="stylesheet" type="text/css"
            href="../styles.css">
        <link href="http://fonts.googleapis.com/css?family=Open+Sans:400,600,700,800" rel="stylesheet" type="text/css">
        <link rel="shortcut icon" href="../favicon.ico">
        
        </head>
        <body data-library="ThreeD" data-type="Geometry">
        <div class="page">
        <div class="header">
          <a href="../index.html"><div class="logo"></div></a>
          <a href="../index.html">Dart Documentation</a>
         &rsaquo; <a href="../ThreeD.html">ThreeD</a> &rsaquo; <a href="../ThreeD/Geometry.html">Geometry</a>        <div id="search-box">
          <input type="search" name="q" id="q" autocomplete="off"
              class="search-input" placeholder="Search API">
        </div>
        
      </div>
      <div class="drop-down" id="drop-down"></div>
      
        <div class="nav">
        
<h2><div class="icon-library"></div><a href="../CurveUtils.html">CurveUtils</a></h2><h2><div class="icon-library"></div><a href="../FontUtils.html">FontUtils</a></h2><h2><div class="icon-library"></div><a href="../GeometryUtils.html">GeometryUtils</a></h2><h2><div class="icon-library"></div><a href="../ImageUtils.html">ImageUtils</a></h2><h2><div class="icon-library"></div><a href="../SceneUtils.html">SceneUtils</a></h2><h2><div class="icon-library"></div><a href="../ShapeUtils.html">ShapeUtils</a></h2><h2><div class="icon-library"></div><a href="../ThreeD.html">ThreeD</a></h2><ul class="icon">
<li><a href="../ThreeD/AmbientLight.html"><div class="icon-class"></div>AmbientLight</a></li>
<li><a href="../ThreeD/ArcCurve.html"><div class="icon-class"></div>ArcCurve</a></li>
<li><a href="../ThreeD/ArrowHelper.html"><div class="icon-class"></div>ArrowHelper</a></li>
<li><a href="../ThreeD/AxisHelper.html"><div class="icon-class"></div>AxisHelper</a></li>
<li><a href="../ThreeD/Bone.html"><div class="icon-class"></div>Bone</a></li>
<li><a href="../ThreeD/BoundingBox.html"><div class="icon-class"></div>BoundingBox</a></li>
<li><a href="../ThreeD/BoundingSphere.html"><div class="icon-class"></div>BoundingSphere</a></li>
<li><a href="../ThreeD/Buffer.html"><div class="icon-class"></div>Buffer</a></li>
<li><a href="../ThreeD/BufferGeometry.html"><div class="icon-class"></div>BufferGeometry</a></li>
<li><a href="../ThreeD/Camera.html"><div class="icon-class"></div>Camera</a></li>
<li><a href="../ThreeD/CanvasRenderData.html"><div class="icon-class"></div>CanvasRenderData</a></li>
<li><a href="../ThreeD/CanvasRenderer.html"><div class="icon-class"></div>CanvasRenderer</a></li>
<li><a href="../ThreeD/CircleGeometry.html"><div class="icon-class"></div>CircleGeometry</a></li>
<li><a href="../ThreeD/ClosedSplineCurve3.html"><div class="icon-class"></div>ClosedSplineCurve3</a></li>
<li><a href="../ThreeD/Color.html"><div class="icon-class"></div>Color</a></li>
<li><a href="../ThreeD/ConvexGeometry.html"><div class="icon-class"></div>ConvexGeometry</a></li>
<li><a href="../ThreeD/CubeGeomSides.html"><div class="icon-class"></div>CubeGeomSides</a></li>
<li><a href="../ThreeD/CubeGeometry.html"><div class="icon-class"></div>CubeGeometry</a></li>
<li><a href="../ThreeD/CubeReflectionMapping.html"><div class="icon-class"></div>CubeReflectionMapping</a></li>
<li><a href="../ThreeD/CubeRefractionMapping.html"><div class="icon-class"></div>CubeRefractionMapping</a></li>
<li><a href="../ThreeD/CubicBezierCurve.html"><div class="icon-class"></div>CubicBezierCurve</a></li>
<li><a href="../ThreeD/CubicBezierCurve3.html"><div class="icon-class"></div>CubicBezierCurve3</a></li>
<li><a href="../ThreeD/Curve.html"><div class="icon-class"></div>Curve&lt;V&gt;</a></li>
<li><a href="../ThreeD/Curve2D.html"><div class="icon-class"></div>Curve2D</a></li>
<li><a href="../ThreeD/Curve3D.html"><div class="icon-class"></div>Curve3D</a></li>
<li><a href="../ThreeD/CurvePath.html"><div class="icon-class"></div>CurvePath</a></li>
<li><a href="../ThreeD/CylinderGeometry.html"><div class="icon-class"></div>CylinderGeometry</a></li>
<li><a href="../ThreeD/DataTexture.html"><div class="icon-class"></div>DataTexture</a></li>
<li><a href="../ThreeD/DirectionalLight.html"><div class="icon-class"></div>DirectionalLight</a></li>
<li><a href="../ThreeD/EllipseCurve.html"><div class="icon-class"></div>EllipseCurve</a></li>
<li><a href="../ThreeD/EventEmitter.html"><div class="icon-class"></div>EventEmitter</a></li>
<li><a href="../ThreeD/EventEmitterEvent.html"><div class="icon-class"></div>EventEmitterEvent</a></li>
<li><a href="../ThreeD/ExtrudeGeometry.html"><div class="icon-class"></div>ExtrudeGeometry</a></li>
<li><a href="../ThreeD/ExtrudeGeometryWorldUVGenerator.html"><div class="icon-class"></div>ExtrudeGeometryWorldUVGenerator</a></li>
<li><a href="../ThreeD/Face3.html"><div class="icon-class"></div>Face3</a></li>
<li><a href="../ThreeD/Face4.html"><div class="icon-class"></div>Face4</a></li>
<li><a href="../ThreeD/Fog.html"><div class="icon-class"></div>Fog</a></li>
<li><a href="../ThreeD/FogExp2.html"><div class="icon-class"></div>FogExp2</a></li>
<li><a href="../ThreeD/FogLinear.html"><div class="icon-class"></div>FogLinear</a></li>
<li><a href="../ThreeD/Frustum.html"><div class="icon-class"></div>Frustum</a></li>
<li><div class="icon-class"></div><strong>Geometry</strong></li>
<li><a href="../ThreeD/IFace3.html"><div class="icon-interface"></div>IFace3</a></li>
<li><a href="../ThreeD/IFace4.html"><div class="icon-interface"></div>IFace4</a></li>
<li><a href="../ThreeD/IMaterial.html"><div class="icon-interface"></div>IMaterial</a></li>
<li><a href="../ThreeD/IParticleMaterial.html"><div class="icon-interface"></div>IParticleMaterial</a></li>
<li><a href="../ThreeD/IRenderableFace3.html"><div class="icon-interface"></div>IRenderableFace3</a></li>
<li><a href="../ThreeD/IRenderableFace4.html"><div class="icon-interface"></div>IRenderableFace4</a></li>
<li><a href="../ThreeD/IRenderableObj.html"><div class="icon-interface"></div>IRenderableObj</a></li>
<li><a href="../ThreeD/ITextureMapMaterial.html"><div class="icon-interface"></div>ITextureMapMaterial</a></li>
<li><a href="../ThreeD/IVector2.html"><div class="icon-interface"></div>IVector2</a></li>
<li><a href="../ThreeD/IVector3.html"><div class="icon-interface"></div>IVector3</a></li>
<li><a href="../ThreeD/IVector4.html"><div class="icon-interface"></div>IVector4</a></li>
<li><a href="../ThreeD/IcosahedronGeometry.html"><div class="icon-class"></div>IcosahedronGeometry</a></li>
<li><a href="../ThreeD/ImageLoader.html"><div class="icon-class"></div>ImageLoader</a></li>
<li><a href="../ThreeD/ImmediateRenderObject.html"><div class="icon-class"></div>ImmediateRenderObject</a></li>
<li><a href="../ThreeD/Intersect.html"><div class="icon-class"></div>Intersect</a></li>
<li><a href="../ThreeD/JSONLoader.html"><div class="icon-class"></div>JSONLoader</a></li>
<li><a href="../ThreeD/LOD.html"><div class="icon-class"></div>LOD</a></li>
<li><a href="../ThreeD/LatheGeometry.html"><div class="icon-class"></div>LatheGeometry</a></li>
<li><a href="../ThreeD/LensFlare.html"><div class="icon-class"></div>LensFlare</a></li>
<li><a href="../ThreeD/Light.html"><div class="icon-class"></div>Light</a></li>
<li><a href="../ThreeD/Line.html"><div class="icon-class"></div>Line</a></li>
<li><a href="../ThreeD/LineBasicMaterial.html"><div class="icon-class"></div>LineBasicMaterial</a></li>
<li><a href="../ThreeD/LineCurve.html"><div class="icon-class"></div>LineCurve</a></li>
<li><a href="../ThreeD/LineCurve3.html"><div class="icon-class"></div>LineCurve3</a></li>
<li><a href="../ThreeD/LoadCompleteCallback.html"><div class="icon-interface"></div>LoadCompleteCallback</a></li>
<li><a href="../ThreeD/LoadProgressCallback.html"><div class="icon-interface"></div>LoadProgressCallback</a></li>
<li><a href="../ThreeD/LoadStartCallback.html"><div class="icon-interface"></div>LoadStartCallback</a></li>
<li><a href="../ThreeD/LoadedCallback.html"><div class="icon-interface"></div>LoadedCallback</a></li>
<li><a href="../ThreeD/Loader.html"><div class="icon-class"></div>Loader</a></li>
<li><a href="../ThreeD/Material.html"><div class="icon-class"></div>Material</a></li>
<li><a href="../ThreeD/Matrix3.html"><div class="icon-class"></div>Matrix3</a></li>
<li><a href="../ThreeD/Matrix4.html"><div class="icon-class"></div>Matrix4</a></li>
<li><a href="../ThreeD/Mesh.html"><div class="icon-class"></div>Mesh</a></li>
<li><a href="../ThreeD/MeshBasicMaterial.html"><div class="icon-class"></div>MeshBasicMaterial</a></li>
<li><a href="../ThreeD/MeshDepthMaterial.html"><div class="icon-class"></div>MeshDepthMaterial</a></li>
<li><a href="../ThreeD/MeshFaceMaterial.html"><div class="icon-class"></div>MeshFaceMaterial</a></li>
<li><a href="../ThreeD/MeshLambertMaterial.html"><div class="icon-class"></div>MeshLambertMaterial</a></li>
<li><a href="../ThreeD/MeshNormalMaterial.html"><div class="icon-class"></div>MeshNormalMaterial</a></li>
<li><a href="../ThreeD/MeshPhongMaterial.html"><div class="icon-class"></div>MeshPhongMaterial</a></li>
<li><a href="../ThreeD/MorphAnimMesh.html"><div class="icon-class"></div>MorphAnimMesh</a></li>
<li><a href="../ThreeD/Object3D.html"><div class="icon-class"></div>Object3D</a></li>
<li><a href="../ThreeD/OctahedronGeometry.html"><div class="icon-class"></div>OctahedronGeometry</a></li>
<li><a href="../ThreeD/OrthographicCamera.html"><div class="icon-class"></div>OrthographicCamera</a></li>
<li><a href="../ThreeD/ParametricGeometry.html"><div class="icon-class"></div>ParametricGeometry</a></li>
<li><a href="../ThreeD/Particle.html"><div class="icon-class"></div>Particle</a></li>
<li><a href="../ThreeD/ParticleBasicMaterial.html"><div class="icon-class"></div>ParticleBasicMaterial</a></li>
<li><a href="../ThreeD/ParticleCanvasMaterial.html"><div class="icon-class"></div>ParticleCanvasMaterial</a></li>
<li><a href="../ThreeD/ParticleCanvasMaterialProgram.html"><div class="icon-interface"></div>ParticleCanvasMaterialProgram</a></li>
<li><a href="../ThreeD/ParticleSystem.html"><div class="icon-class"></div>ParticleSystem</a></li>
<li><a href="../ThreeD/Path.html"><div class="icon-class"></div>Path</a></li>
<li><a href="../ThreeD/PathAction.html"><div class="icon-class"></div>PathAction</a></li>
<li><a href="../ThreeD/PerspectiveCamera.html"><div class="icon-class"></div>PerspectiveCamera</a></li>
<li><a href="../ThreeD/PlaneGeometry.html"><div class="icon-class"></div>PlaneGeometry</a></li>
<li><a href="../ThreeD/PointLight.html"><div class="icon-class"></div>PointLight</a></li>
<li><a href="../ThreeD/PolyhedronGeometry.html"><div class="icon-class"></div>PolyhedronGeometry</a></li>
<li><a href="../ThreeD/PolyhedronGeometryVertex.html"><div class="icon-class"></div>PolyhedronGeometryVertex</a></li>
<li><a href="../ThreeD/Program.html"><div class="icon-class"></div>Program</a></li>
<li><a href="../ThreeD/Projector.html"><div class="icon-class"></div>Projector</a></li>
<li><a href="../ThreeD/ProjectorRenderData.html"><div class="icon-class"></div>ProjectorRenderData</a></li>
<li><a href="../ThreeD/QuadraticBezierCurve.html"><div class="icon-class"></div>QuadraticBezierCurve</a></li>
<li><a href="../ThreeD/QuadraticBezierCurve3.html"><div class="icon-class"></div>QuadraticBezierCurve3</a></li>
<li><a href="../ThreeD/Quaternion.html"><div class="icon-class"></div>Quaternion</a></li>
<li><a href="../ThreeD/Ray.html"><div class="icon-class"></div>Ray</a></li>
<li><a href="../ThreeD/Rectangle.html"><div class="icon-class"></div>Rectangle</a></li>
<li><a href="../ThreeD/RenderInts.html"><div class="icon-class"></div>RenderInts</a></li>
<li><a href="../ThreeD/RenderableFace3.html"><div class="icon-class"></div>RenderableFace3</a></li>
<li><a href="../ThreeD/RenderableFace4.html"><div class="icon-class"></div>RenderableFace4</a></li>
<li><a href="../ThreeD/RenderableLine.html"><div class="icon-class"></div>RenderableLine</a></li>
<li><a href="../ThreeD/RenderableObject.html"><div class="icon-class"></div>RenderableObject</a></li>
<li><a href="../ThreeD/RenderableParticle.html"><div class="icon-class"></div>RenderableParticle</a></li>
<li><a href="../ThreeD/RenderableVertex.html"><div class="icon-class"></div>RenderableVertex</a></li>
<li><a href="../ThreeD/Renderer.html"><div class="icon-class"></div>Renderer</a></li>
<li><a href="../ThreeD/Ribbon.html"><div class="icon-class"></div>Ribbon</a></li>
<li><a href="../ThreeD/Scene.html"><div class="icon-class"></div>Scene</a></li>
<li><a href="../ThreeD/ShaderMaterial.html"><div class="icon-class"></div>ShaderMaterial</a></li>
<li><a href="../ThreeD/Shape.html"><div class="icon-class"></div>Shape</a></li>
<li><a href="../ThreeD/SkinnedMesh.html"><div class="icon-class"></div>SkinnedMesh</a></li>
<li><a href="../ThreeD/SphereGeometry.html"><div class="icon-class"></div>SphereGeometry</a></li>
<li><a href="../ThreeD/SphericalReflectionMapping.html"><div class="icon-class"></div>SphericalReflectionMapping</a></li>
<li><a href="../ThreeD/SphericalRefractionMapping.html"><div class="icon-class"></div>SphericalRefractionMapping</a></li>
<li><a href="../ThreeD/SplineCurve.html"><div class="icon-class"></div>SplineCurve</a></li>
<li><a href="../ThreeD/SplineCurve3.html"><div class="icon-class"></div>SplineCurve3</a></li>
<li><a href="../ThreeD/SpotLight.html"><div class="icon-class"></div>SpotLight</a></li>
<li><a href="../ThreeD/Sprite.html"><div class="icon-class"></div>Sprite</a></li>
<li><a href="../ThreeD/SpriteAlignment.html"><div class="icon-class"></div>SpriteAlignment</a></li>
<li><a href="../ThreeD/TetrahedronGeometry.html"><div class="icon-class"></div>TetrahedronGeometry</a></li>
<li><a href="../ThreeD/TextGeometry.html"><div class="icon-class"></div>TextGeometry</a></li>
<li><a href="../ThreeD/Texture.html"><div class="icon-class"></div>Texture</a></li>
<li><a href="../ThreeD/Three.html"><div class="icon-class"></div>Three</a></li>
<li><a href="../ThreeD/TorusGeometry.html"><div class="icon-class"></div>TorusGeometry</a></li>
<li><a href="../ThreeD/TorusKnotGeometry.html"><div class="icon-class"></div>TorusKnotGeometry</a></li>
<li><a href="../ThreeD/TubeGeometry.html"><div class="icon-class"></div>TubeGeometry</a></li>
<li><a href="../ThreeD/UV.html"><div class="icon-class"></div>UV</a></li>
<li><a href="../ThreeD/UVMapping.html"><div class="icon-class"></div>UVMapping</a></li>
<li><a href="../ThreeD/Uniform.html"><div class="icon-class"></div>Uniform</a></li>
<li><a href="../ThreeD/UniformsUtils.html"><div class="icon-class"></div>UniformsUtils</a></li>
<li><a href="../ThreeD/Vector2.html"><div class="icon-class"></div>Vector2</a></li>
<li><a href="../ThreeD/Vector3.html"><div class="icon-class"></div>Vector3</a></li>
<li><a href="../ThreeD/Vector4.html"><div class="icon-class"></div>Vector4</a></li>
<li><a href="../ThreeD/Vertex.html"><div class="icon-class"></div>Vertex</a></li>
<li><a href="../ThreeD/WebGLCamera.html"><div class="icon-class"></div>WebGLCamera</a></li>
<li><a href="../ThreeD/WebGLGeometry.html"><div class="icon-class"></div>WebGLGeometry</a></li>
<li><a href="../ThreeD/WebGLMaterial.html"><div class="icon-class"></div>WebGLMaterial</a></li>
<li><a href="../ThreeD/WebGLObject.html"><div class="icon-class"></div>WebGLObject</a></li>
<li><a href="../ThreeD/WebGLRenderTarget.html"><div class="icon-class"></div>WebGLRenderTarget</a></li>
<li><a href="../ThreeD/WebGLRenderTargetCube.html"><div class="icon-class"></div>WebGLRenderTargetCube</a></li>
<li><a href="../ThreeD/WebGLRenderer.html"><div class="icon-class"></div>WebGLRenderer</a></li>
<li><a href="../ThreeD/WebGLRendererInfo.html"><div class="icon-class"></div>WebGLRendererInfo</a></li>
<li><a href="../ThreeD/WebGLRendererMemoryInfo.html"><div class="icon-class"></div>WebGLRendererMemoryInfo</a></li>
<li><a href="../ThreeD/WebGLRendererRenderInfo.html"><div class="icon-class"></div>WebGLRendererRenderInfo</a></li>
</ul>
<h2><div class="icon-library"></div><a href="../ThreeMath.html">ThreeMath</a></h2></div>
<div class="content">
        <h2><strong>Geometry</strong>
          Class
        </h2>
        
<div class="doc">
<p>@author mr.doob / http://mrdoob.com/
@author kile / http://kile.stravaganza.org/
@author alteredq / http://alteredqualia.com/
@author mikael emtinger / http://gomo.se/
@author zz85 / http://www.lab4games.net/zz85/blog</p>
<p>Ported to Dart from JS by:
@author rob silverton / http://www.unwrong.com/</p>
</div>
<h3>Subclasses</h3>
<p>
<span class="type-box"><span class="icon-class"></span><a href="../ThreeD/CircleGeometry.html">CircleGeometry</a></span>, <span class="type-box"><span class="icon-class"></span><a href="../ThreeD/ConvexGeometry.html">ConvexGeometry</a></span>, <span class="type-box"><span class="icon-class"></span><a href="../ThreeD/CubeGeometry.html">CubeGeometry</a></span>, <span class="type-box"><span class="icon-class"></span><a href="../ThreeD/CylinderGeometry.html">CylinderGeometry</a></span>, <span class="type-box"><span class="icon-class"></span><a href="../ThreeD/ExtrudeGeometry.html">ExtrudeGeometry</a></span>, <span class="type-box"><span class="icon-class"></span><a href="../ThreeD/LatheGeometry.html">LatheGeometry</a></span>, <span class="type-box"><span class="icon-class"></span><a href="../ThreeD/ParametricGeometry.html">ParametricGeometry</a></span>, <span class="type-box"><span class="icon-class"></span><a href="../ThreeD/PlaneGeometry.html">PlaneGeometry</a></span>, <span class="type-box"><span class="icon-class"></span><a href="../ThreeD/PolyhedronGeometry.html">PolyhedronGeometry</a></span>, <span class="type-box"><span class="icon-class"></span><a href="../ThreeD/SphereGeometry.html">SphereGeometry</a></span>, <span class="type-box"><span class="icon-class"></span><a href="../ThreeD/TorusGeometry.html">TorusGeometry</a></span>, <span class="type-box"><span class="icon-class"></span><a href="../ThreeD/TorusKnotGeometry.html">TorusKnotGeometry</a></span>, <span class="type-box"><span class="icon-class"></span><a href="../ThreeD/TubeGeometry.html">TubeGeometry</a></span></p>
<h3>Constructors</h3>
<div class="method"><h4 id="Geometry">
<span class="show-code">Code</span>
new <strong>Geometry</strong>() <a class="anchor-link" href="#Geometry"
              title="Permalink to Geometry.Geometry">#</a></h4>
<div class="doc">

<pre class="source">
Geometry() 
    : id = Three.GeometryCount ++,

      name = '',
      
      vertices = &lt;Vector3&gt;[],
      colors = [], // one-to-one vertex colors, used in ParticleSystem, Line and Ribbon
  
      materials = [],
  
      faces = [],
  
      faceUvs = [[]],
      faceVertexUvs = [[]],
  
      morphTargets = [],
      morphColors = [],
      morphNormals = [],
      
      skinWeights = [],
      skinIndices = [],
  
      boundingBox = null,
      boundingSphere = null,
  
      hasTangents = false,
  
      _dynamic = false;
</pre>
</div>
</div>
<h3>Methods</h3>
<div class="method"><h4 id="Dynamic">
<span class="show-code">Code</span>
<a href="http://api.dartlang.org/dart_core/bool.html">bool</a> <strong>get Dynamic</strong>() <a class="anchor-link" href="#Dynamic"
              title="Permalink to Geometry.get Dynamic">#</a></h4>
<div class="doc">

<pre class="source">
bool get isDynamic =&gt; _dynamic;
</pre>
</div>
</div>
<div class="method"><h4 id="applyMatrix">
<span class="show-code">Code</span>
void <strong>applyMatrix</strong>(<a href="../ThreeD/Matrix4.html">Matrix4</a> matrix) <a class="anchor-link" href="#applyMatrix"
              title="Permalink to Geometry.applyMatrix">#</a></h4>
<div class="doc">

<pre class="source">
void applyMatrix( Matrix4 matrix ) {
  Matrix4 matrixRotation = new Matrix4();
  matrixRotation.extractRotation( matrix);

  vertices.forEach((vertex) =&gt; matrix.multiplyVector3( vertex ));

  faces.forEach((face) {

    matrixRotation.multiplyVector3( face.normal );
    
    face.vertexNormals.forEach((normal) =&gt; matrixRotation.multiplyVector3( normal ));

    matrix.multiplyVector3( face.centroid );
  });
}
</pre>
</div>
</div>
<div class="method"><h4 id="clone">
<span class="show-code">Code</span>
<strong>clone</strong>() <a class="anchor-link" href="#clone"
              title="Permalink to Geometry.clone">#</a></h4>
<div class="doc">

<pre class="source">
clone() {

  // TODO

}
</pre>
</div>
</div>
<div class="method"><h4 id="computeBoundingBox">
<span class="show-code">Code</span>
void <strong>computeBoundingBox</strong>() <a class="anchor-link" href="#computeBoundingBox"
              title="Permalink to Geometry.computeBoundingBox">#</a></h4>
<div class="doc">

<pre class="source">
void computeBoundingBox() {
  if ( boundingBox === null ) {
    boundingBox = new BoundingBox( min: new Vector3(), max: new Vector3() );
  }
  
  if ( vertices.length &gt; 0 ) {
    Vector3 position, firstPosition = vertices[ 0 ];

    boundingBox.min.copy( firstPosition );
    boundingBox.max.copy( firstPosition );

    Vector3 min = boundingBox.min,
            max = boundingBox.max;

    num vl = vertices.length;
    for ( int v = 1; v &lt; vl; v ++ ) {
      position = vertices[ v ];

      if ( position.x &lt; min.x ) {
        min.x = position.x;
      } else if ( position.x &gt; max.x ) {
        max.x = position.x;
      }

      if ( position.y &lt; min.y ) {
        min.y = position.y;
      } else if ( position.y &gt; max.y ) {
        max.y = position.y;
      }

      if ( position.z &lt; min.z ) {
        min.z = position.z;
      } else if ( position.z &gt; max.z ) {
        max.z = position.z;
      }
    }
  }
}
</pre>
</div>
</div>
<div class="method"><h4 id="computeBoundingSphere">
<span class="show-code">Code</span>
void <strong>computeBoundingSphere</strong>() <a class="anchor-link" href="#computeBoundingSphere"
              title="Permalink to Geometry.computeBoundingSphere">#</a></h4>
<div class="doc">

<pre class="source">
void computeBoundingSphere() {
  num radiusSq;
  
  var maxRadiusSq = vertices.reduce(0, (num curMaxRadiusSq, Vector3 vertex) {
    radiusSq = vertex.lengthSq();
    return ( radiusSq &gt; curMaxRadiusSq ) ?  radiusSq : curMaxRadiusSq;
  });

  boundingSphere = new BoundingSphere(radius: Math.sqrt(maxRadiusSq) );
}
</pre>
</div>
</div>
<div class="method"><h4 id="computeCentroids">
<span class="show-code">Code</span>
void <strong>computeCentroids</strong>() <a class="anchor-link" href="#computeCentroids"
              title="Permalink to Geometry.computeCentroids">#</a></h4>
<div class="doc">

<pre class="source">
void computeCentroids() {

  faces.forEach((face) {

    face.centroid.setValues( 0, 0, 0 );

    if ( face is Face3 ) {
      face.centroid.addSelf( vertices[ face.a ] );
      face.centroid.addSelf( vertices[ face.b ] );
      face.centroid.addSelf( vertices[ face.c ] );
      face.centroid.divideScalar( 3 );
    } else if ( face is Face4 ) {
      Face4 face4 = face;
      face4.centroid.addSelf( vertices[ face4.a ] );
      face4.centroid.addSelf( vertices[ face4.b ] );
      face4.centroid.addSelf( vertices[ face4.c ] );
      face4.centroid.addSelf( vertices[ face4.d ] );
      face4.centroid.divideScalar( 4 );
    }
    
  });
}
</pre>
</div>
</div>
<div class="method"><h4 id="computeFaceNormals">
<span class="show-code">Code</span>
void <strong>computeFaceNormals</strong>() <a class="anchor-link" href="#computeFaceNormals"
              title="Permalink to Geometry.computeFaceNormals">#</a></h4>
<div class="doc">

<pre class="source">
void computeFaceNormals() {
  num n, nl, v, vl, f;  
  Vertex vertex;

  Vector3 vA, vB, vC;
  Vector3 cb = new Vector3(), ab = new Vector3();

  faces.forEach((face) { 

    vA = vertices[ face.a ];
    vB = vertices[ face.b ];
    vC = vertices[ face.c ];

    cb.sub( vC, vB );
    ab.sub( vA, vB );
    cb.crossSelf( ab );

    if ( !cb.isZero() ) {
      cb.normalize();
    }

    face.normal.copy( cb );
    
  });
}
</pre>
</div>
</div>
<div class="method"><h4 id="computeTangents">
<span class="show-code">Code</span>
void <strong>computeTangents</strong>() <a class="anchor-link" href="#computeTangents"
              title="Permalink to Geometry.computeTangents">#</a></h4>
<div class="doc">

<pre class="source">
void computeTangents() {
  // based on http://www.terathon.com/code/tangent.html
  // tangents go to vertices

  var f, fl, face;
  num i, il, vertexIndex, test, w;
  Vector3 vA, vB, vC; 
  UV uvA, uvB, uvC;
  
  List uv;
  
  num x1, x2, y1, y2, z1, z2, s1, s2, t1, t2, r;
    
  Vector3 sdir = new Vector3(),
          tdir = new Vector3(),
          tmp = new Vector3(),
          tmp2 = new Vector3(), 
          n = new Vector3(),
          t;

  List&lt;Vector3&gt; tan1 = vertices.map((_) =&gt; new Vector3()) as List,
                tan2 = vertices.map((_) =&gt; new Vector3()) as List;

  var handleTriangle = ( context, a, b, c, ua, ub, uc ) {
    
    vA = context.vertices[ a ];
    vB = context.vertices[ b ];
    vC = context.vertices[ c ];

    uvA = uv[ ua ];
    uvB = uv[ ub ];
    uvC = uv[ uc ];

    x1 = vB.x - vA.x;
    x2 = vC.x - vA.x;
    y1 = vB.y - vA.y;
    y2 = vC.y - vA.y;
    z1 = vB.z - vA.z;
    z2 = vC.z - vA.z;

    s1 = uvB.u - uvA.u;
    s2 = uvC.u - uvA.u;
    t1 = uvB.v - uvA.v;
    t2 = uvC.v - uvA.v;

    r = 1.0 / ( s1 * t2 - s2 * t1 );
    sdir.setValues( ( t2 * x1 - t1 * x2 ) * r,
        ( t2 * y1 - t1 * y2 ) * r,
        ( t2 * z1 - t1 * z2 ) * r );
    tdir.setValues( ( s1 * x2 - s2 * x1 ) * r,
          ( s1 * y2 - s2 * y1 ) * r,
          ( s1 * z2 - s2 * z1 ) * r );

    tan1[ a ].addSelf( sdir );
    tan1[ b ].addSelf( sdir );
    tan1[ c ].addSelf( sdir );

    tan2[ a ].addSelf( tdir );
    tan2[ b ].addSelf( tdir );
    tan2[ c ].addSelf( tdir );

  };
  
  fl = this.faces.length;
  
  for ( f = 0; f &lt; fl; f ++ ) {

    face = this.faces[ f ];
    UV uv = faceVertexUvs[ 0 ][ f ]; // use UV layer 0 for tangents

    if ( face is Face3 ) {
      handleTriangle( this, face.a, face.b, face.c, 0, 1, 2 );
    } else if ( face is Face4 ) {
      Face4 face4 = face;
      handleTriangle( this, face4.a, face4.b, face4.d, 0, 1, 3 );
      handleTriangle( this, face4.b, face4.c, face4.d, 1, 2, 3 );
    }
  }

  var faceIndex = [ 'a', 'b', 'c', 'd' ];

  faces.forEach((face) {
   
    il = face.vertexNormals.length;
    
    for ( i = 0; i &lt; il; i++ ) {
      
      n.copy( face.vertexNormals[ i ] );
    
      // TODO: Check if this works instead
      // vertexIndex = face.dynamic[ faceIndex[ i ] ];
      
      if ( faceIndex[i] == "a") {
        vertexIndex = face.a;
      } else if ( faceIndex[i] == "b") {
        vertexIndex = face.b;
      } else if ( faceIndex[i] == "c") {
        vertexIndex = face.c;
      } else if ( faceIndex[i] == "d") {
        vertexIndex = (face as Face4).d;
      }
      
      t = tan1[ vertexIndex ];
    
      // Gram-Schmidt orthogonalize
    
      tmp.copy( t );
      tmp.subSelf( n.multiplyScalar( n.dot( t ) ) ).normalize();
    
      // Calculate handedness
    
      tmp2.cross( face.vertexNormals[ i ], t );
      test = tmp2.dot( tan2[ vertexIndex ] );
      w = (test &lt; 0.0) ? -1.0 : 1.0;
    
      face.vertexTangents[ i ] = new Vector4( tmp.x, tmp.y, tmp.z, w );

    }

  });

  hasTangents = true;

}
</pre>
</div>
</div>
<div class="method"><h4 id="computeVertexNormals">
<span class="show-code">Code</span>
void <strong>computeVertexNormals</strong>() <a class="anchor-link" href="#computeVertexNormals"
              title="Permalink to Geometry.computeVertexNormals">#</a></h4>
<div class="doc">

<pre class="source">
void computeVertexNormals() {

  List&lt;Vector3&gt; vertices;
  

  // create internal buffers for reuse when calling this method repeatedly
  // (otherwise memory allocation / deallocation every frame is big resource hog)
  if ( __tmpVertices === null ) {
    
    __tmpVertices = [];
    this.vertices.forEach((_) =&gt; __tmpVertices.add(new Vector3())); 
    vertices = __tmpVertices;

    faces.forEach((face) {

      if ( face is Face3 ) {
        face.vertexNormals = [ new Vector3(), new Vector3(), new Vector3() ];

      } else if ( face is Face4 ) {
        face.vertexNormals = [ new Vector3(), new Vector3(), new Vector3(), new Vector3() ];
      }
    });

  } else {
    vertices = __tmpVertices;
    
    var vl = this.vertices.length;
    for ( var v = 0; v &lt; vl; v ++ ) {
      vertices[ v ].setValues( 0, 0, 0 );
    }
    
  }

  faces.forEach((face) { 

    if ( face is Face3 ) {
      vertices[ face.a ].addSelf( face.normal );
      vertices[ face.b ].addSelf( face.normal );
      vertices[ face.c ].addSelf( face.normal );
    } else if ( face is Face4 ) {
      Face4 face4 = face;
      vertices[ face4.a ].addSelf( face4.normal );
      vertices[ face4.b ].addSelf( face4.normal );
      vertices[ face4.c ].addSelf( face4.normal );
      vertices[ face4.d ].addSelf( face4.normal );
    }
  });
  
  vertices.forEach((v) =&gt; v.normalize());

  faces.forEach((face) { 

    if ( face is Face3 ) {
      face.vertexNormals[ 0 ].copy( vertices[ face.a ] );
      face.vertexNormals[ 1 ].copy( vertices[ face.b ] );
      face.vertexNormals[ 2 ].copy( vertices[ face.c ] );
    } else if ( face is Face4 ) {
      Face4 face4 = face;
      face4.vertexNormals[ 0 ].copy( vertices[ face4.a ] );
      face4.vertexNormals[ 1 ].copy( vertices[ face4.b ] );
      face4.vertexNormals[ 2 ].copy( vertices[ face4.c ] );
      face4.vertexNormals[ 3 ].copy( vertices[ face4.d ] );
    }
  });
}
</pre>
</div>
</div>
<div class="method"><h4 id="mergeVertices">
<span class="show-code">Code</span>
<a href="http://api.dartlang.org/dart_core/int.html">int</a> <strong>mergeVertices</strong>() <a class="anchor-link" href="#mergeVertices"
              title="Permalink to Geometry.mergeVertices">#</a></h4>
<div class="doc">

<pre class="source">
int mergeVertices() {
  Map verticesMap = {}; // Hashmap for looking up vertice by position coordinates (and making sure they are unique)
  List&lt;Vertex&gt; unique = [];
  List&lt;int&gt; changes = [];

  String key;
  int precisionPoints = 4; // number of decimal points, eg. 4 for epsilon of 0.0001
  num precision = Math.pow( 10, precisionPoints );
  int i, il;
  var abcd = 'abcd', o, k, j, jl, u;
  
  Vector3 v;
  il = this.vertices.length;
  
  for( i = 0; i &lt; il; i++) {
    v = this.vertices[i];
    
    key = Strings.join( [ ( v.x * precision ).round().toStringAsFixed(0), 
                          ( v.y * precision ).round().toStringAsFixed(0), 
                          ( v.z * precision ).round().toStringAsFixed(0) ], '_' );
    
    if ( verticesMap[ key ] == null ) {
      verticesMap[ key ] = i;
      unique.add( v );
      //TODO: pretty sure this is an acceptable change in syntax here:
      //changes[ i ] = unique.length - 1;
      changes.add( unique.length - 1);
    } else {
      //print('Duplicate vertex found. $i could be using  ${verticesMap[key]}');
      //print('changes len ${changes.length} add at i = $i');
      //changes[ i ] = changes[ verticesMap[ key ] ];
      changes.add( changes[ verticesMap[ key ] ] );
    }
  
  }

  
  // Start to patch face indices
  
  il = faces.length;
  for( i = 0; i &lt; il; i ++ ) {
    IFace3 face = faces[ i ];
    
    if ( face is Face3 ) {
      face.a = changes[ face.a ];
      face.b = changes[ face.b ];
      face.c = changes[ face.c ];
    } else if ( face is Face4 ) {
      Face4 face4 = face;
      face4.a = changes[ face4.a ];
      face4.b = changes[ face4.b ];
      face4.c = changes[ face4.c ];
      face4.d = changes[ face4.d ];
      
      /* TODO
      
      // check dups in (a, b, c, d) and convert to -&gt; face3

      var o = [ face.a, face.b, face.c, face.d ];

      for ( var k = 3; k &gt; 0; k -- ) {

        if ( o.indexOf( face[ abcd[ k ] ] ) !== k ) {

          // console.log('faces', face.a, face.b, face.c, face.d, 'dup at', k);

          o.splice( k, 1 );

          this.faces[ i ] = new THREE.Face3( o[0], o[1], o[2], face.normal, face.color, face.materialIndex );

          for ( j = 0, jl = this.faceVertexUvs.length; j &lt; jl; j ++ ) {

            u = this.faceVertexUvs[ j ][ i ];
            if ( u ) u.splice( k, 1 );

          }

          this.faces[ i ].vertexColors = face.vertexColors;

          break;
        }

      }*/
      
    }
  }
  
  // Use unique set of vertices
  var diff = vertices.length - unique.length;
  vertices = unique;
  return diff;
}
</pre>
</div>
</div>
<div class="method"><h4 id="operator []=">
<span class="show-code">Code</span>
<strong>operator []=</strong>(<a href="http://api.dartlang.org/dart_core/String.html">String</a> key, value) <a class="anchor-link" href="#operator []="
              title="Permalink to Geometry.operator []=">#</a></h4>
<div class="doc">

<pre class="source">
operator []= (String key, value) =&gt; _data[key] = value;
</pre>
</div>
</div>
<div class="method"><h4 id="operator []">
<span class="show-code">Code</span>
<strong>operator []</strong>(<a href="http://api.dartlang.org/dart_core/String.html">String</a> key) <a class="anchor-link" href="#operator []"
              title="Permalink to Geometry.operator []">#</a></h4>
<div class="doc">

<pre class="source">
operator [] (String key) =&gt; _data[key];
</pre>
</div>
</div>
<h3>Fields</h3>
<div class="field"><h4 id="animation">
<span class="show-code">Code</span>
var         <strong>animation</strong> <a class="anchor-link"
            href="#animation"
            title="Permalink to Geometry.animation">#</a>
        </h4>
        <div class="doc">

<pre class="source">
var bones, animation;
</pre>
</div>
</div>
<div class="field"><h4 id="bones">
<span class="show-code">Code</span>
var         <strong>bones</strong> <a class="anchor-link"
            href="#bones"
            title="Permalink to Geometry.bones">#</a>
        </h4>
        <div class="doc">

<pre class="source">
var bones, animation;
</pre>
</div>
</div>
<div class="field"><h4 id="boundingBox">
<span class="show-code">Code</span>
<a href="../ThreeD/BoundingBox.html">BoundingBox</a>         <strong>boundingBox</strong> <a class="anchor-link"
            href="#boundingBox"
            title="Permalink to Geometry.boundingBox">#</a>
        </h4>
        <div class="doc">

<pre class="source">
BoundingBox boundingBox;
</pre>
</div>
</div>
<div class="field"><h4 id="boundingSphere">
<span class="show-code">Code</span>
<a href="../ThreeD/BoundingSphere.html">BoundingSphere</a>         <strong>boundingSphere</strong> <a class="anchor-link"
            href="#boundingSphere"
            title="Permalink to Geometry.boundingSphere">#</a>
        </h4>
        <div class="doc">

<pre class="source">
BoundingSphere boundingSphere;
</pre>
</div>
</div>
<div class="field"><h4 id="colors">
<span class="show-code">Code</span>
<a href="http://api.dartlang.org/dart_core/List.html">List</a>         <strong>colors</strong> <a class="anchor-link"
            href="#colors"
            title="Permalink to Geometry.colors">#</a>
        </h4>
        <div class="doc">

<pre class="source">
List colors;
</pre>
</div>
</div>
<div class="field"><h4 id="faceUvs">
<span class="show-code">Code</span>
<a href="http://api.dartlang.org/dart_core/List.html">List</a>         <strong>faceUvs</strong> <a class="anchor-link"
            href="#faceUvs"
            title="Permalink to Geometry.faceUvs">#</a>
        </h4>
        <div class="doc">

<pre class="source">
List faceUvs;
</pre>
</div>
</div>
<div class="field"><h4 id="faceVertexUvs">
<span class="show-code">Code</span>
<a href="http://api.dartlang.org/dart_core/List.html">List</a>&lt;<a href="http://api.dartlang.org/dart_core/List.html">List</a>&gt;         <strong>faceVertexUvs</strong> <a class="anchor-link"
            href="#faceVertexUvs"
            title="Permalink to Geometry.faceVertexUvs">#</a>
        </h4>
        <div class="doc">

<pre class="source">
List&lt;List&gt; faceVertexUvs;
</pre>
</div>
</div>
<div class="field"><h4 id="faces">
<span class="show-code">Code</span>
<a href="http://api.dartlang.org/dart_core/List.html">List</a>         <strong>faces</strong> <a class="anchor-link"
            href="#faces"
            title="Permalink to Geometry.faces">#</a>
        </h4>
        <div class="doc">

<pre class="source">
List faces;
</pre>
</div>
</div>
<div class="field"><h4 id="hasTangents">
<span class="show-code">Code</span>
<a href="http://api.dartlang.org/dart_core/bool.html">bool</a>         <strong>hasTangents</strong> <a class="anchor-link"
            href="#hasTangents"
            title="Permalink to Geometry.hasTangents">#</a>
        </h4>
        <div class="doc">

<pre class="source">
bool hasTangents, _dynamic;
</pre>
</div>
</div>
<div class="field"><h4 id="id">
<span class="show-code">Code</span>
<a href="http://api.dartlang.org/dart_core/int.html">int</a>         <strong>id</strong> <a class="anchor-link"
            href="#id"
            title="Permalink to Geometry.id">#</a>
        </h4>
        <div class="doc">

<pre class="source">
int id;
</pre>
</div>
</div>
<div class="field"><h4 id="materials">
<span class="show-code">Code</span>
<a href="http://api.dartlang.org/dart_core/List.html">List</a>         <strong>materials</strong> <a class="anchor-link"
            href="#materials"
            title="Permalink to Geometry.materials">#</a>
        </h4>
        <div class="doc">

<pre class="source">
List materials;
</pre>
</div>
</div>
<div class="field"><h4 id="morphColors">
<span class="show-code">Code</span>
<a href="http://api.dartlang.org/dart_core/List.html">List</a>         <strong>morphColors</strong> <a class="anchor-link"
            href="#morphColors"
            title="Permalink to Geometry.morphColors">#</a>
        </h4>
        <div class="doc">

<pre class="source">
List morphTargets, morphColors, morphNormals;
</pre>
</div>
</div>
<div class="field"><h4 id="morphNormals">
<span class="show-code">Code</span>
<a href="http://api.dartlang.org/dart_core/List.html">List</a>         <strong>morphNormals</strong> <a class="anchor-link"
            href="#morphNormals"
            title="Permalink to Geometry.morphNormals">#</a>
        </h4>
        <div class="doc">

<pre class="source">
List morphTargets, morphColors, morphNormals;
</pre>
</div>
</div>
<div class="field"><h4 id="morphTargets">
<span class="show-code">Code</span>
<a href="http://api.dartlang.org/dart_core/List.html">List</a>         <strong>morphTargets</strong> <a class="anchor-link"
            href="#morphTargets"
            title="Permalink to Geometry.morphTargets">#</a>
        </h4>
        <div class="doc">

<pre class="source">
List morphTargets, morphColors, morphNormals;
</pre>
</div>
</div>
<div class="field"><h4 id="name">
<span class="show-code">Code</span>
<a href="http://api.dartlang.org/dart_core/String.html">String</a>         <strong>name</strong> <a class="anchor-link"
            href="#name"
            title="Permalink to Geometry.name">#</a>
        </h4>
        <div class="doc">

<pre class="source">
String name;
</pre>
</div>
</div>
<div class="field"><h4 id="skinIndices">
<span class="show-code">Code</span>
<a href="http://api.dartlang.org/dart_core/List.html">List</a>         <strong>skinIndices</strong> <a class="anchor-link"
            href="#skinIndices"
            title="Permalink to Geometry.skinIndices">#</a>
        </h4>
        <div class="doc">

<pre class="source">
List skinWeights, skinIndices;
</pre>
</div>
</div>
<div class="field"><h4 id="skinWeights">
<span class="show-code">Code</span>
<a href="http://api.dartlang.org/dart_core/List.html">List</a>         <strong>skinWeights</strong> <a class="anchor-link"
            href="#skinWeights"
            title="Permalink to Geometry.skinWeights">#</a>
        </h4>
        <div class="doc">

<pre class="source">
List skinWeights, skinIndices;
</pre>
</div>
</div>
<div class="field"><h4 id="vertices">
<span class="show-code">Code</span>
<a href="http://api.dartlang.org/dart_core/List.html">List</a>&lt;<a href="../ThreeD/Vector3.html">Vector3</a>&gt;         <strong>vertices</strong> <a class="anchor-link"
            href="#vertices"
            title="Permalink to Geometry.vertices">#</a>
        </h4>
        <div class="doc">

<pre class="source">
List&lt;Vector3&gt; vertices;
</pre>
</div>
</div>
        </div>
        <div class="clear"></div>
        </div>
        
        <div class="footer">
          <div>This page was generated at 2012-10-01 16:04:46.255</div>
        </div>
        <script async src="../client-static.js"></script>
        </body></html>
        
